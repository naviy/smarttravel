using System.Collections.Generic;
using System.Linq;

using Luxena.Travel.Domain;
using Luxena.Travel.Parsers;

using NUnit.Framework;




namespace Luxena.Travel.Tests.Parsers
{



	//===g






	[TestFixture]
	public class GalileoConsoleParserTests
    {

		//---g



		private List<AviaDocument> Parse(string content)
		{
			return GalileoConsoleParser
				.Parse(content, new Currency("UAH"))
				.ToList()
			;
		}



		//---g



		[Test]
		public void TestParseTicket01()
		{

			var docs = Parse(@"
--- TST ---
RP/FLXMIA/                       F1/AGMW       F1:2L2RYX   LXA:VFWE6I
RF AGMX_ASMIRNOVA      19JAN2022 1138Z
  1. DUDAR/VALERII MR
  2. GAIDAIEVA/MARGARYTA MRS
  3. GLUKHOVSKA/OLENA MRS
  4. LERIT/ALINA MRS
  5  LX2291 K 03FEB D KBPZRH HK4           0920   1115   *LXA:VFWE6I/E*
  6  LX568  K 03FEB   ZRHNCE HK4        2  1250   1405   *LXA:VFWE6I/E*
  7  LX569  K 06FEB 2 NCEZRH HK4           1510   1625   *LXA:VFWE6I/E*
  8  LX2290 K 06FEB   ZRHKBP HK4        D  1705   2045   *LXA:VFWE6I/E*
  9  AP M -380675002557-A
  10 AP M -380675001991-A
  11 APE BSV@BSV.COM.UA
  12 FP CASH
  13 FH LXA TKNE 72494159076172S5-8.P1
  14 FH LXA TKNE 72494159076183S5-8.P2
  15 FH LXA TKNE 72494159076194S5-8.P3
  16 FH LXA TKNE 72494159076205S5-8.P4
  17 SSR OTHS F1   MISSING SSR CTCM MOBILE OR SSR CTCE EMAIL OR SSR CTCR NON-CONSENT FOR LX/P
  18 SSR OTHS F1   PLS ADV TKT NBR BY 20JAN22/1138Z OR LX OPTG/MKTG FLTS WILL BE CANX / APPLIC FARE RULE APPLIES IF IT DEMANDS EARLIER TKTG/P
  19 SSR DOCS LX  HK P/UA/FP550670/UA/16APR73/F/02JUL28/GLUKHOVSKA/OLENA/P3
  20 SSR DOCS LX  HK P/UA/FJ352892/UA/29NOV88/F/24OCT27/LERIT/ALINA/P4
  21 SSR DOCS LX  HK P/UA/FU590767/UA/30JUN82/M/25MAR29/DUDAR/VALERII/P1
  22 SSR DOCS LX  HK P/UA/FA846391/UA/09APR65/F/28SEP25/GAIDAIEVA/MARGARYTA/P2
  23 SSR TKNE LX  HK 7249415907617C1/S5.P1
  24 SSR TKNE LX  HK 7249415907617C2/S6.P1
  25 SSR TKNE LX  HK 7249415907617C3/S7.P1
  26 SSR TKNE LX  HK 7249415907617C4/S8.P1
  27 SSR TKNE LX  HK 7249415907618C1/S5.P2
  28 SSR TKNE LX  HK 7249415907618C2/S6.P2
  29 SSR TKNE LX  HK 7249415907618C3/S7.P2
  30 SSR TKNE LX  HK 7249415907618C4/S8.P2
  31 SSR TKNE LX  HK 7249415907619C1/S5.P3
  32 SSR TKNE LX  HK 7249415907619C2/S6.P3
  33 SSR TKNE LX  HK 7249415907619C3/S7.P3
  34 SSR TKNE LX  HK 7249415907619C4/S8.P3
  35 SSR TKNE LX  HK 7249415907620C1/S5.P4
  36 SSR TKNE LX  HK 7249415907620C2/S6.P4
  37 SSR TKNE LX  HK 7249415907620C3/S7.P4
  38 SSR TKNE LX  HK 7249415907620C4/S8.P4
>tqt
TST00001                 AGMX_ASMIRNOVALD 20JAN22

FXB
   1.DUDAR/VALERII LERIT/ALINA GLUKHOVSKA/OLENA GAIDAIEVA/MARGARYTA
     KBP-ZRH LX  2291K 03FEB 0920 OK  K05CLSE8             03FEB03FEB  1PC
     ZRH-NCE LX  568 K 03FEB 1250 OK  K05CLSE8             03FEB03FEB  1PC
     NCE-ZRH LX  569 K 06FEB 1510 OK  K05CLSE8             06FEB06FEB  1PC
     ZRH-KBP LX  2290K 06FEB 1705 OK  K05CLSE8             06FEB06FEB  1PC
     KBP
FARE    USD    181.00
EQUIV   UAH    5139.00
TX001   UAH    162.00YQ
TX002   UAH    162.00YQ
TX003   UAH    162.00YQ
TX004   UAH    162.00YQ
TX005   UAH    992.00CH
TX006   UAH    270.00FR
TX007   UAH    265.00FR
TX008   UAH    146.00IZ
TX009   UAH     97.00O4
TX0010  UAH    188.00QX
TX0011  UAH    114.00UA
TX0012  UAH     57.00UD
TX0013  UAH    369.00YK
TOTAL   UAH    8285.00    BSR 28.392265
GRAND TOTAL UAH    33140.00
IEV LX X/ZRH LX NCE90.50 LX X/ZRH LX IEV90.50 NUC181.00END ROE1.000000
FE FARE RESTRICTION MAY APPLY
FM *F*1.00A
FV *F*LX
>
"
			);



			docs.AssertAll(

				a => a
					.IssueDate("2022-01-19")
					.PnrCode("2L2RYX")
					.TourCode("VFWE6I")
					.BookerOffice("AGMX")
					.BookerCode("ASMIRNOVA")

			);



			docs.Assert(


				a => a

					.PassengerName("DUDAR/VALERII MR")
					.AirlinePrefixCode("724")
					.Number("9415907617")

				,


				a => a

					.PassengerName("GAIDAIEVA/MARGARYTA MRS")
					.AirlinePrefixCode("724")
					.Number("9415907618")

				,


				a => a

					.PassengerName("GLUKHOVSKA/OLENA MRS")
					.AirlinePrefixCode("724")
					.Number("9415907619")

				,


				a => a

					.PassengerName("LERIT/ALINA MRS")
					.AirlinePrefixCode("724")
					.Number("9415907620")

			);


		}



		//---g

	}






	//===g



}
