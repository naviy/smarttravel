// LxnBase.js
Ext.ns('LxnBase.Data');LxnBase.Data.WebServiceProxy=function(service,method){LxnBase.Data.WebServiceProxy.superclass.constructor.call(this);this._service=service;this._method=method;};Ext.extend(LxnBase.Data.WebServiceProxy,Ext.data.DataProxy,{useGet:false,wrapper:null,arguments:null,setResponse:function(response){this._response=response;},load:function(params,reader,callback,scope,arg){if(arg&&params&&!arg.params)arg.params=params;if(this.fireEvent("beforeload",this,params)===false){callback.call(scope||this,null,arg,false);return;} var handleResponse=ss.Delegate.create(this,function(response){if(typeof response.Start=='number')arg.params.start=response.Start;if(response.Sort)arg.params.sort=response.Sort;if(response.Dir)arg.params.dir=response.Dir;var records;try{records=reader.readRecords(response);} catch(e){this.fireEvent("loadexception",this,response,arg,e);callback.call(scope,null,arg,false);return;} this.fireEvent("load",this,response,arg);callback.call(scope||window,records,arg,true);});if(this._response){handleResponse(this._response);this._response=null;return;} Ext.apply(arg,this.arguments);this._service.invoke(this._method,arg,this.useGet,this.wrapper,handleResponse,ss.Delegate.create(this,function(error){this.fireEvent("loadexception",this,null,arg);callback.call(scope||window,null,arg,false);}));},_request:null,_method:null,_response:null});LxnBase.Data.RangeReader=function(meta,recordType){meta=meta||{};LxnBase.Data.RangeReader.superclass.constructor.call(this,meta,recordType||meta.fields);};LxnBase.Data.RangeReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(o){var sid=this.meta.id;var root=this.createAccessor(this.meta.root)(o);var records=[];var totalRecords;if(this.meta.totalProperty){totalRecords=this.createAccessor(this.meta.totalProperty)(o);if(isNaN(totalRecords)){throw'Invalid total records value';}} for(var i=0;i<root.length;i++){var n=root[i];var id=((sid||sid===0)&&n[sid]!==undefined&&n[sid]!==""?n[sid]:null);var record=new this.recordType(this.readData(n),id);record.json=n;records[records.length]=record;} return{records:records,totalRecords:totalRecords===null?records.length:totalRecords};},readData:function(n){var fields=this.recordType.prototype.fields;var data={};for(var j=0,jlen=fields.length;j<jlen;j++){var field=fields.items[j];var pos=field.mapping!==undefined&&field.mapping!==null?field.mapping:j;data[field.name]=n[pos]!==undefined?field.convert(n[pos],n):field.defaultValue;} return data;}});LxnBase.Data.GenericStore=function(config){if(config&&config.baseParams)this.baseParams=config.baseParams;else{this.baseParams={start:null,limit:null,sort:null,dir:null,searchMode:null,query:null,conditions:null};} LxnBase.Data.GenericStore.superclass.constructor.call(this,config);}
Ext.extend(LxnBase.Data.GenericStore,Ext.data.Store,{get_start:function(){return this.baseParams.start;},set_start:function(value){this.baseParams.start=value;},get_limit:function(){return this.baseParams.limit;},set_limit:function(value){this.baseParams.limit=value;},get_sortField:function(){return this.baseParams.sort;},set_sortField:function(value){this.baseParams.sort=value;},get_sortDirection:function(){return this.baseParams.dir;},set_sortDirection:function(value){this.baseParams.dir=value;},get_searchMode:function(){return this.baseParams.searchMode;},set_searchMode:function(value){this.baseParams.searchMode=value;},get_suggestionQuery:function(){return this.baseParams.query;},set_suggestionQuery:function(value){this.baseParams.query=value;},get_filter:function(){return this.baseParams.filter;},set_filter:function(value){this.baseParams.filter=value;},load:function(options){options=options||{};if(this.fireEvent("beforeload",this,options)!==false){this.storeOptions(options);var p=this.baseParams||{};for(var paramName in options.params)p[paramName]=options.params[paramName];options.params=p;if(this.sortInfo&&this.remoteSort){var pn=this.paramNames;p[pn["sort"]]=this.sortInfo.field;p[pn["dir"]]=this.sortInfo.direction;} this.proxy.load(p,this.reader,this.loadRecords,this,options);return true;} else{return false;}}});Ext.ns('LxnBase.UI.Controls.ColumnFilters');LxnBase.UI.pathToImages="img/";LxnBase.UI.Controls.ColumnFilters.FilterMenuItem=function(cfg){LxnBase.UI.Controls.ColumnFilters.FilterMenuItem.superclass.constructor.call(this,cfg);if(cfg&&cfg.menuIcon)this.menuIcon=cfg.menuIcon;if(cfg&&cfg.editor)this.editor=cfg.editor;if(cfg&&cfg.editorEvents)this.editorEvents=cfg.editorEvents;}
LxnBase.UI.Controls.ColumnFilters.FilterMenuItem=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",hideOnClick:false,initComponent:function(){if(!this.menuIcon)this.menuIcon=LxnBase.UI.pathToImages+"find.png";LxnBase.UI.Controls.ColumnFilters.FilterMenuItem.superclass.initComponent.call(this);this.addEvents("keyup");this.addEvents("keydown");this.addEvents("change");this.editor=this.editor||new Ext.form.TextField();if(this.text){this.editor.setValue(this.text);}},onRender:function(container){var s=container.createChild({cls:this.itemCls,html:'<img src="'+this.menuIcon+'" style="margin: 3px 0px 0px 2px; vertical-align: top;" />'});Ext.apply(this.config,{width:125});this.editor.render(s);if(this.editorEvents){for(var i=0;i<this.editorEvents.length;i++)this.editor.on(this.editorEvents[i],this._onChange,this);} this.editor.on("keydown",this._onKeyDown,this);this.editor.on("keyup",this._onKeyUp,this);this.el=s;this.relayEvents(this.editor.el,["keyup"]);this.relayEvents(this.editor.el,["keydown"]);if(Ext.isGecko){s.setStyle('overflow','auto');} LxnBase.UI.Controls.ColumnFilters.FilterMenuItem.superclass.onRender.call(this,container);},getValue:function(){return this.editor.getValue();},setValue:function(value){this.editor.setValue(value);},isValid:function(preventMark){return this.editor.isValid(preventMark);},_onChange:function(){this.fireEvent("change",this);},_onKeyUp:function(field,e){var key=e.getKey();this.fireEvent("keyup",this);if(e==e.ENTER){e.stopEvent();e.preventDefault();this._onChange();}},_onKeyDown:function(field,e){this.fireEvent("keydown",this);}});Ext.ns('Ext.ux.layout');Ext.ux.layout.CenterLayout=Ext.extend(Ext.layout.FitLayout,{setItemSize:function(item,size){this.container.addClass('ux-layout-center');item.addClass('ux-layout-center-item');if(item&&size.height>0){if(item.width){size.width=item.width;} item.setSize(size);}}});Ext.Container.LAYOUTS['ux.center']=Ext.ux.layout.CenterLayout;Ext.ux.layout.RowLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,isValidParent:function(c,target){return c.getEl().dom.parentNode==this.innerCt.dom;},onLayout:function(ct,target){var rs=ct.items.items,len=rs.length,r,i;if(!this.innerCt){target.addClass('ux-row-layout-ct');this.innerCt=target.createChild({cls:'x-row-inner'});} this.renderAll(ct,this.innerCt);var size=target.getViewSize();if(size.width<1&&size.height<1){return;} var h=size.height-target.getPadding('tb'),ph=h;this.innerCt.setSize({height:h});for(i=0;i<len;i++){r=rs[i];if(!r.rowHeight){ph-=(r.getSize().height+r.getEl().getMargins('tb'));}} ph=ph<0?0:ph;for(i=0;i<len;i++){r=rs[i];if(r.rowHeight){r.setSize({height:Math.floor(r.rowHeight*ph)-r.getEl().getMargins('tb')});}}}});Ext.Container.LAYOUTS['ux.row']=Ext.ux.layout.RowLayout;if(this.JSON&&!this.JSON.hasMsFix){var reIsoDate=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;var reParseMsDate=/\/Date\((-?[0-9]+)([\+\-][0-9]+)?\)\//;var reFixMsDate=/(^|[^\\])\"(\/Date\(-?[0-9]+([\+\-][0-9]+)?\))\/\"/g;var parse=JSON.parse;var stringify=JSON.stringify;var hasStringifyIssue=parse(stringify({a:1},function(key,value){if(key=='a')return 2;return value;})).a==1;JSON.parse=function(json){try{var res=parse(json,function(key,value){if(typeof value==='string'){if(reIsoDate.exec(value)){return new Date(value);} var groups=reParseMsDate.exec(value);if(groups){if(groups[2]){return new Date((+groups[1])+(+groups[2])*60000);} var d=new Date(+groups[1]);return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds());}} return value;});return res;} catch(e){throw new Error("JSON content could not be parsed");return null;}};JSON.stringify=function(json){if(json===undefined){return json;} if(hasStringifyIssue){json=parse(stringify(json));} return stringify(json,function(key,value){if(typeof value=="string"&&reIsoDate.exec(value)){var d=new Date(value);var s='/Date('+Date.UTC(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds())+')/';if(hasStringifyIssue){this[key]=s;} return s;} return value;}).replace(reFixMsDate,'$1"\\$2\\/"');};JSON.hasMsFix=true;}(function($){
Type.registerNamespace('LxnBase');LxnBase.BaseRes={atoGrid_UpdateRowMsg1:'\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 {0} \u0441\u0442\u0440\u043e\u043a\u0435',
atoGrid_UpdateRowMsg2:'\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0432 {0} \u0441\u0442\u0440\u043e\u043a\u0430\u0445',
autoGrid_ActionNotPermitted_Msg:'\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f. \u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b \u043f\u0440\u0430\u0432\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443 \u0441\u0438\u0441\u0442\u0435\u043c\u044b',
autoGrid_ContinueDelete_Msg:'\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432?',
autoGrid_DeleteCompletedMsg1:'\u0443\u0434\u0430\u043b\u0435\u043d\u0430 {0} \u0441\u0442\u0440\u043e\u043a\u0430',
autoGrid_DeleteCompletedMsg2:'\u0443\u0434\u0430\u043b\u0435\u043d\u044b {0} \u0441\u0442\u0440\u043e\u043a\u0438',
autoGrid_DeleteCompletedMsg3:'\u0443\u0434\u0430\u043b\u0435\u043d\u043e {0} \u0441\u0442\u0440\u043e\u043a',
autoGrid_DeleteConstrainedFailed_Msg:'\u041e\u0431\u044a\u0435\u043a\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d, \u0442\u0430\u043a \u043a\u0430\u043a \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043d\u0438\u043c \u0434\u0430\u043d\u043d\u044b\u0435.',
autoGrid_DeleteFailed_Msg:'\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u044b, \u0442\u0430\u043a \u043a\u0430\u043a \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043d\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0435:',
autoGrid_DeleteMsg1:'{0} \u0441\u0442\u0440\u043e\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u0430. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?',
autoGrid_DeleteMsg2:'{0} \u0441\u0442\u0440\u043e\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u044b. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?',
autoGrid_DeleteMsg3:'{0} \u0441\u0442\u0440\u043e\u043a \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d\u043e. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?',
autoGrid_DispayMsg:'\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f {0} - {1} \u0438\u0437 {2}',
autoGrid_EmptyMsg:'\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442',
autoGrid_NotDisplay_Msg:'(\u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438)',
autoGrid_RefreshData:'\u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438',
autoGrid_RejectChanges:'\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435',
autoGrid_RepeatUpdate:'\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435',
autoGrid_ReplaceToAdmin_Msg:'\u0414\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0441 \u0437\u0430\u043c\u0435\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.',
autoGrid_ResetFilter_Title:'\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440',
autoGrid_ReturnToEditing:'\u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e',
autoGrid_SaveChanges:'\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f',
autoGrid_SimpleFilter_Title:'\u0424\u0438\u043b\u044c\u0442\u0440:',
autoGrid_SuspendUpdate:'\u041e\u0442\u043b\u043e\u0436\u0438\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435',
autoGrid_UnsavedChangesMsg:'\u0415\u0441\u0442\u044c \u043d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f',
autoList_AutoCommit:'\u0430\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435',
cancel:'\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c',
cancel_Lower:'\u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c',
caption_Separator:':',
clear:'\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c',
close:'\u0417\u0430\u043a\u0440\u044b\u0442\u044c',
confirmation:'\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435',
copy:'\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c',
copy_Lower:'\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c',
created:'\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e',
createItem:'\u0421\u043e\u0437\u0434\u0430\u0442\u044c',
createItem_Lower:'\u0441\u043e\u0437\u0434\u0430\u0442\u044c',
createObjectMsg:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043d\u043e\u0432\u044b\u0439 '{0}': {1}",
creation:'\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435',
deleted:'\u0443\u0434\u0430\u043b\u0435\u043d\u043e',
delete_Confirmation:'\u041e\u0431\u044a\u0435\u043a\u0442 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d. \u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?',
edit:'\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c',
editing:'\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435',
edit_Lower:'\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c',
error:'\u041e\u0448\u0438\u0431\u043a\u0430',
export_Action:'\u042d\u043a\u0441\u043f\u043e\u0440\u0442',
export_All:'\u0432\u0441\u0435 ({0})',
export_ExceptSelection:'\u0432\u0441\u0435 \u043a\u0440\u043e\u043c\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 ({0})',
export_Selection:'\u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 ({0})',
filterOperator_Contains:'\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442',
filterOperator_EndsWith:'\u0417\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430',
filterOperator_Equals:'\u0420\u0430\u0432\u043d\u043e',
filterOperator_Greater:'\u0411\u043e\u043b\u044c\u0448\u0435',
filterOperator_GreaterOrEquals:'\u0411\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0432\u043d\u043e',
filterOperator_IsIn:'\u0421\u0440\u0435\u0434\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439',
filterOperator_IsNull:'\u041f\u0443\u0441\u0442\u043e',
filterOperator_Less:'\u041c\u0435\u043d\u044c\u0448\u0435',
filterOperator_LessOrEquals:'\u041c\u0435\u043d\u044c\u0448\u0435 \u0440\u0430\u0432\u043d\u043e',
filterOperator_None:'\u041e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u0435\u0442',
filterOperator_StartsWith:'\u041d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441',
filter_AfterDate:'\u0421',
filter_BeforeDate:'\u041f\u043e',
filter_Conjunction:'\u0438',
filter_False:'\u041d\u0435\u0442',
filter_GeneralFilterMsg:"\u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 '{0}'",
filter_Not:'\u043d\u0435',
filter_OnDate:'\u0412',
filter_Title:'\u0424\u0438\u043b\u044c\u0442\u0440',
filter_True:'\u0414\u0430',
list:'\u0441\u043f\u0438\u0441\u043e\u043a',
loading:'\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...',
messages_Title:'\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f',
noData_Text:'\u043d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445',
propertyFilterCondition_Not:'\u041d\u0435...',
remove:'\u0423\u0434\u0430\u043b\u0438\u0442\u044c',
remove_Lower:'\u0443\u0434\u0430\u043b\u0438\u0442\u044c',
replace:'\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u044c',
replaceDelete:'\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441 \u0437\u0430\u043c\u0435\u043d\u043e\u0439',
replaceForm_DeleteAfterReplace:'\u0423\u0434\u0430\u043b\u044f\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043c\u0435\u043d\u044b',
replaceForm_DependentObjects:'\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b',
replaceForm_ObjectForReplace:'\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c {0}, \u0442\u0430\u043a \u043a\u0430\u043a \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.',
replaceForm_ReplaceComplete_Msg:'{0} \u0443\u0434\u0430\u043b\u0435\u043d\u043e \u0441 \u0437\u0430\u043c\u0435\u043d\u043e\u0439 \u043d\u0430 {1}',
replaceForm_ReplacingObject:'\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441 \u0437\u0430\u043c\u0435\u043d\u043e\u0439 \u0441\u0432\u044f\u0437\u0435\u0439 \u043d\u0430:',
salutation:'\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435',
salutation_Text_List:'\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f',
save:'\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c',
saveChenges_Msg:'\u0414\u0430\u043d\u043d\u044b\u0435 \u0431\u044b\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b. \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?',
saveObjectValidationErrorMsg:'\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435',
save_Lower:'c\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c',
select_Lower:'\u0432\u044b\u0431\u0440\u0430\u0442\u044c',
unknownError:'\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443',
unreadMessageCount_Msg1:'{0} \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435',
unreadMessageCount_Msg2:'{0} \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f',
unreadMessageCount_Msg3:'{0} \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439',
updated:'\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e',
updateObjectMsg:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d '{0}': {1}",
valiadationStatusHideError_Msg:'\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0441\u043d\u043e\u0432\u0430, \u0447\u0442\u043e\u0431\u044b \u0441\u043a\u0440\u044b\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a',
valiadationStatusSowError_Msg:'\u0424\u043e\u0440\u043c\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 (\u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u0437\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430...)',
view:'\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440',
warning:'\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435',
webServiceAborted:"The server method '{0}' aborted.",
webServiceFailed:"The server method '{0}' failed with the following error: {1}",
webServiceFailedNoMsg:"The server method '{0}' failed.",
webServiceInvalidJsonWrapper:"The server method '{0}' returned invalid data. The '{1}' property is missing from the JSON wrapper.",
webServiceParseError:"The server method '{0}' parse error.",
webServiceResponse_Error_Msg:'\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0432\u0430\u043c \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e \u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432 \u043d\u043e\u0432\u043e\u043c. \u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0442\u044c\u0441\u044f \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.',
webServiceResponse_Error_Title:'\u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430',
webServiceTimedOut:"The server method '{0}' timed out."
};LxnBase.MessageType=function(){};LxnBase.MessageType.prototype = {info:0,warn:1,error:2}
LxnBase.MessageType.registerEnum('LxnBase.MessageType',false);LxnBase.EnumUtility=function(){}
LxnBase.EnumUtility.localize=function(type,value,resources){if(value==null){return null;}var $0=LxnBase.EnumUtility.toString(type,value);var $1=type.get_name().substr(0,1).toLowerCase()+type.get_name().substr(1);var $2=resources[$1+'_'+$0];return (String.isNullOrEmpty($2))?$0:$2;}
LxnBase.EnumUtility.toString=function(type,value){var $0=type;var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if($1.value===value){return LxnBase.StringUtility.capitalize($1.key);}}return null;}
LxnBase.MessageRegister=function(){}
LxnBase.MessageRegister.add_newMessage=function(value){LxnBase.MessageRegister.$0=ss.Delegate.combine(LxnBase.MessageRegister.$0,value);}
LxnBase.MessageRegister.remove_newMessage=function(value){LxnBase.MessageRegister.$0=ss.Delegate.remove(LxnBase.MessageRegister.$0,value);}
LxnBase.MessageRegister.error=function(message,details,handled){if(LxnBase.MessageRegister.$0!=null){LxnBase.MessageRegister.$0(null,new LxnBase.MessageRegisterEventArgs(2,message,details,null,handled));}}
LxnBase.MessageRegister.warn=function(message,details){if(LxnBase.MessageRegister.$0!=null){LxnBase.MessageRegister.$0(null,new LxnBase.MessageRegisterEventArgs(1,message,details));}}
LxnBase.MessageRegister.info=function(messageCaption,message,details){if(LxnBase.MessageRegister.$0!=null){LxnBase.MessageRegister.$0(null,new LxnBase.MessageRegisterEventArgs(0,message,details,messageCaption));}}
LxnBase.MessageRegisterEventArgs=function(type,message,details,messageCaption,handled){LxnBase.MessageRegisterEventArgs.initializeBase(this);this.$1_0=messageCaption;this.$1_1=message;this.$1_2=details;this.$1_3=type;this.$1_4=handled;}
LxnBase.MessageRegisterEventArgs.prototype={get_type:function(){return this.$1_3;},set_type:function(value){this.$1_3=value;return value;},get_messageCaption:function(){return this.$1_0;},set_messageCaption:function(value){this.$1_0=value;return value;},get_message:function(){return this.$1_1;},set_message:function(value){this.$1_1=value;return value;},get_details:function(){return this.$1_2;},set_details:function(value){this.$1_2=value;return value;},get_handled:function(){return this.$1_4;},set_handled:function(value){this.$1_4=value;return value;},$1_0:null,$1_1:null,$1_2:null,$1_3:0,$1_4:false}
LxnBase.NumberUtility=function(){}
LxnBase.NumberUtility.isNumber=function(obj){return typeof(obj)==='number'&&isFinite(obj);}
LxnBase.StringUtility=function(){}
LxnBase.StringUtility.getNumberText=function(number,textFormat1,textFormat2,textFormat3){var $0=number%100;if(5<=$0&&$0<=20){return String.format(textFormat3,number);}var $1=number%10;if($1===1){return String.format(textFormat1,number);}if($1===2||$1===3||$1===4){return String.format(textFormat2,number);}return String.format(textFormat3,number);}
LxnBase.StringUtility.capitalize=function(value){if(String.isNullOrEmpty(value)){return value;}return value.substr(0,1).toUpperCase()+value.substr(1);}
LxnBase.StringUtility.toString=function(obj){if(ss.isNullOrUndefined(obj)){return '';}if(Type.canCast(obj,Date)){return (obj).format('d.m.Y');}if(('Name' in obj)){return obj.Name;}if(('Text' in obj)){return obj.Text;}return '';}
LxnBase.Log=function(){}
LxnBase.Log.log=function(msg1,msg2,msg3,msg4,msg5){if(!ss.isUndefined(msg5)){eval('$log(msg1, msg2, msg3, msg4, msg5)');return msg5;}if(!ss.isUndefined(msg4)){eval('$log(msg1, msg2, msg3, msg4)');return msg4;}if(!ss.isUndefined(msg3)){eval('$log(msg1, msg2, msg3)');return msg3;}if(!ss.isUndefined(msg2)){eval('$log(msg1, msg2)');return msg2;}eval('$log(msg1)');return msg1;}
LxnBase.Log.loga=function(msg1,msg2,msg3,msg4,msg5){if(!ss.isUndefined(msg5)){eval('$log(msg1, msg2, msg3, msg4, msg5)');return msg5;}if(!ss.isUndefined(msg4)){eval('$log(msg1, msg2, msg3, msg4)');return msg4;}if(!ss.isUndefined(msg3)){eval('$log(msg1, msg2, msg3)');return msg3;}if(!ss.isUndefined(msg2)){eval('$log(msg1, msg2)');return msg2;}eval('$log(msg1)');return msg1;}
LxnBase.Log.logb=function(msg){eval('$logb(msg)');return msg;}
LxnBase.Log.loge=function(){eval('$loge()');}
LxnBase.Log.alert=function(msg){eval('$log(msg)');alert((ss.isValue(msg))?msg.toString():(ss.isNull(msg))?'null':'undefined');return msg;}
LxnBase.Log.trace=function(){eval('console.trace()');}
Type.registerNamespace('LxnBase.Data');LxnBase.Data.DocumentExportMode=function(){};LxnBase.Data.DocumentExportMode.prototype = {all:0,selected:1,exceptSelected:2}
LxnBase.Data.DocumentExportMode.registerEnum('LxnBase.Data.DocumentExportMode',false);LxnBase.Data.FilterOperator=function(){};LxnBase.Data.FilterOperator.prototype = {none:0,equals:1,isNull:2,startsWith:3,contains:4,endsWith:5,less:6,lessOrEquals:7,greaterOrEquals:8,greater:9,isIn:10,isIdIn:11}
LxnBase.Data.FilterOperator.registerEnum('LxnBase.Data.FilterOperator',false);LxnBase.Data.RangeRequest=function(){}
LxnBase.Data.RangeRequest.prototype={setDefaultSort:function(sort,dir){if(this.sort!=null){return;}this.sort=sort;this.dir=(dir)?'ASC':'DESC';},ClassName:null,NamedFilters:null,Filters:null,query:null,GeneralFilter:null,VisibleProperties:null,HiddenProperties:null,start:0,limit:0,sort:null,dir:null,PositionableObjectId:null}
LxnBase.Data.Reference=function(){}
LxnBase.Data.Reference.create=function(type,name,id){var $0=new LxnBase.Data.Reference();$0.Type=type;$0.Name=name;$0.Id=id;return $0;}
LxnBase.Data.Reference.createFromArray=function(array){var $0=new LxnBase.Data.Reference();var $1=array;$0.Type=$1[LxnBase.Data.Reference.TypePos];$0.Name=$1[LxnBase.Data.Reference.NamePos];$0.Id=$1[LxnBase.Data.Reference.IdPos];return $0;}
LxnBase.Data.Reference.copy=function(source){if(source==null){return null;}var $0=new LxnBase.Data.Reference();$0.Type=source.Type;$0.Name=source.Name;$0.Id=source.Id;return $0;}
LxnBase.Data.Reference.equals=function(obj1,obj2){return obj1!=null&&obj2!=null&&obj1.Id===obj2.Id;}
LxnBase.Data.Reference.prototype={Id:null,Name:null,Type:null}
LxnBase.Data.DeleteOperationResponse=function(){}
LxnBase.Data.DeleteOperationResponse.prototype={Success:false,RangeResponse:null,UndeletableObjects:null}
LxnBase.Data.DocumentExportArgs=function(){}
LxnBase.Data.DocumentExportArgs.prototype={Mode:0,Request:null,SelectedDocuments:null}
LxnBase.Data.ItemResponse=function(){}
LxnBase.Data.ItemResponse.create=function(item){var $0=new LxnBase.Data.ItemResponse();$0.Item=item;return $0;}
LxnBase.Data.ItemResponse.prototype={Item:null,RangeResponse:null,Errors:null}
LxnBase.Data.OperationPermissions=function(){}
LxnBase.Data.OperationPermissions.prototype={CanList:null,CanCreate:null,CanUpdate:null,CanDelete:null,CustomActionPermissions:null}
LxnBase.Data.OperationStatus=function(){}
LxnBase.Data.OperationStatus.prototype={IsEnabled:false,IsDisabled:false,IsHidden:false,Visible:false,DisableInfo:null}
LxnBase.Data.PropertyFilter=function(){}
LxnBase.Data.PropertyFilter.prototype={InternalPath:null,Property:null,Conditions:null}
LxnBase.Data.PropertyFilterCondition=function(){}
LxnBase.Data.PropertyFilterCondition.prototype={Not:false,Operator:0,Value:null}
LxnBase.Data.RangeResponse=function(){}
LxnBase.Data.RangeResponse.prototype={Start:0,Sort:null,Dir:null,TotalCount:0,List:null,SelectedRow:0}
LxnBase.Data.ConfigManager=function(){}
LxnBase.Data.ConfigManager.getListConfig=function(className,listConfigLoaded){if(Object.keyExists(LxnBase.Data.ConfigManager.$0,className)){listConfigLoaded(LxnBase.Data.ConfigManager.$0[className]);}else{LxnBase.Services.GenericService.GetRangeConfig(className,function($p1_0){
LxnBase.Data.ConfigManager.$0[className]=$p1_0;listConfigLoaded($p1_0);},null);}}
LxnBase.Data.ConfigManager.getViewConfig=function(className,itemConfigLoaded){if(Object.keyExists(LxnBase.Data.ConfigManager.$1,className)){itemConfigLoaded(LxnBase.Data.ConfigManager.$1[className]);}else{LxnBase.Services.GenericService.GetItemConfig(className,true,function($p1_0){
LxnBase.Data.ConfigManager.$1[className]=$p1_0;itemConfigLoaded($p1_0);},null);}}
LxnBase.Data.ConfigManager.getEditConfig=function(className,itemConfigLoaded){if(Object.keyExists(LxnBase.Data.ConfigManager.$2,className)){itemConfigLoaded(LxnBase.Data.ConfigManager.$2[className]);}else{LxnBase.Services.GenericService.GetItemConfig(className,false,function($p1_0){
LxnBase.Data.ConfigManager.$2[className]=$p1_0;itemConfigLoaded($p1_0);},null);}}
LxnBase.Data.ObjectPropertyNames=function(){}
Type.registerNamespace('LxnBase.Services');LxnBase.Services.TypeEnum=function(){};LxnBase.Services.TypeEnum.prototype = {object:0,number:1,list:2,bool:3,string:4,date:5,custom:6}
LxnBase.Services.TypeEnum.registerEnum('LxnBase.Services.TypeEnum',false);LxnBase.Services.ColumnConfig=function(){}
LxnBase.Services.ColumnConfig.prototype={Name:null,Caption:null,Type:0,IsRequired:false,IsReadOnly:false,IsPersistent:false,IsReference:false,ListWidth:0,Hidden:false,DefaultValue:null}
LxnBase.Services.ClassColumnConfig=function(){LxnBase.Services.ClassColumnConfig.initializeBase(this);}
LxnBase.Services.ClassColumnConfig.prototype={Clazz:null,FilterType:0,Length:0,RenderAsString:false}
LxnBase.Services.ClassDefinition=function(){}
LxnBase.Services.ClassDefinition.prototype={ClassId:null,Caption:null,ListCaption:null}
LxnBase.Services.CustomTypeColumnConfig=function(){LxnBase.Services.CustomTypeColumnConfig.initializeBase(this);}
LxnBase.Services.CustomTypeColumnConfig.prototype={TypeName:null}
LxnBase.Services.DateTimeColumnConfig=function(){LxnBase.Services.DateTimeColumnConfig.initializeBase(this);}
LxnBase.Services.DateTimeColumnConfig.prototype={FormatString:null}
LxnBase.Services.GenericService=function(){}
LxnBase.Services.GenericService.GetRange=function(className,pparams,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('GetRange',{className:className,params:pparams},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.getRangeProxy=function(className){var $0=new LxnBase.Data.WebServiceProxy(LxnBase.Services.GenericService.service,'GetRange');$0.arguments={className:className};return $0;}
LxnBase.Services.GenericService.Refresh=function(className,ids,visibleProperties,hiddenProperties,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Refresh',{className:className,ids:ids,visibleProperties:visibleProperties,hiddenProperties:hiddenProperties},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.GetRangeConfig=function(className,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('GetRangeConfig',{className:className},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Get=function(className,id,viewMode,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Get',{className:className,id:id,viewMode:viewMode},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.GetItemConfig=function(className,viewMode,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('GetItemConfig',{className:className,viewMode:viewMode},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Suggest=function(className,pparams,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Suggest',{className:className,params:pparams},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.suggestProxy=function(className){var $0=new LxnBase.Data.WebServiceProxy(LxnBase.Services.GenericService.service,'Suggest');$0.arguments={className:className};return $0;}
LxnBase.Services.GenericService.CanUpdate=function(className,id,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('CanUpdate',{className:className,id:id},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Update=function(className,id,version,data,pparams,onSuccess,onError){var $0=data;delete $0.__reference;delete $0.__class;LxnBase.Services.GenericService.service.invoke('Update',{className:className,id:id,version:version,data:data,params:pparams},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.CanDelete=function(className,ids,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('CanDelete',{className:className,ids:ids},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Delete=function(className,ids,pparams,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Delete',{className:className,ids:ids,params:pparams},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.CanList=function(className,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('CanList',{className:className},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.GetDependencies=function(className,id,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('GetDependencies',{className:className,id:id},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.CanReplace=function(className,id,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('CanReplace',{className:className,id:id},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Replace=function(className,oldId,newId,deleteOld,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Replace',{className:className,oldId:oldId,newId:newId,deleteOld:deleteOld},false,null,onSuccess,onError);}
LxnBase.Services.GenericService.Export=function(className,args,onSuccess,onError){LxnBase.Services.GenericService.service.invoke('Export',{className:className,args:args},false,null,onSuccess,onError);}
LxnBase.Services.ItemConfig=function(){}
LxnBase.Services.ItemConfig.prototype={Columns:null,Caption:null,ListCaption:null,IsListAllowed:null,IsCreationAllowed:null,IsCopyingAllowed:null,IsEditAllowed:null,IsRemovingAllowed:null,CustomActionPermissions:null}
LxnBase.Services.ListColumnConfig=function(){LxnBase.Services.ListColumnConfig.initializeBase(this);}
LxnBase.Services.ListColumnConfig.prototype={Items:null}
LxnBase.Services.ListConfig=function(){}
LxnBase.Services.ListConfig.prototype={Columns:null,Caption:null,Filterable:false,IsCreationAllowed:null,UseCustomCreation:false,IsCopyingAllowed:null,IsEditAllowed:null,IsRemovingAllowed:null,IsQuickEditAllowed:false,SingleSelect:false,CustomActionPermissions:null}
LxnBase.Services.NumberColumnConfig=function(){LxnBase.Services.NumberColumnConfig.initializeBase(this);}
LxnBase.Services.NumberColumnConfig.prototype={IsInteger:false}
LxnBase.Services.TextColumnConfig=function(){LxnBase.Services.TextColumnConfig.initializeBase(this);}
LxnBase.Services.TextColumnConfig.prototype={Length:0,Lines:0}
Type.registerNamespace('LxnBase.Knockout');LxnBase.Knockout.DateBindingHandler=function(){LxnBase.Knockout.DateBindingHandler.initializeBase(this);}
LxnBase.Knockout.DateBindingHandler.prototype={update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=ko.utils.unwrapObservable(valueAccessor());if(Type.canCast($0,Date)){$(element).text($0.format('d.m.Y'));}}}
LxnBase.Knockout.EmailBindingHandler=function(){LxnBase.Knockout.EmailBindingHandler.initializeBase(this);}
LxnBase.Knockout.EmailBindingHandler.prototype={update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=ko.utils.unwrapObservable(valueAccessor());var $1=(String.isNullOrEmpty($0))?null:((LxnBase.Knockout.EmailBindingHandler.$1_0.test($0))?$0:'mailto:'+$0);$(element).attr('href',$1).text($0);}}
LxnBase.Knockout.FixedBindingHandler=function(){LxnBase.Knockout.FixedBindingHandler.initializeBase(this);}
LxnBase.Knockout.FixedBindingHandler.prototype={update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=$(element);var $1=ko.utils.unwrapObservable(valueAccessor());if(!ss.isValue($1)){$1='';}else if(LxnBase.NumberUtility.isNumber($1)){var $2=$1;$1=$2.format('n');if($2<0){$0.addClass('negative');}}else{var $3=$1.MoneyString;if(ss.isValue($3)){$1=ko.utils.unwrapObservable($3);}else{$1=$1.toString();}}$0.text($1);}}
LxnBase.Knockout.LinkBindingHandler=function(){LxnBase.Knockout.LinkBindingHandler.initializeBase(this);}
LxnBase.Knockout.LinkBindingHandler.prototype={update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=ko.utils.unwrapObservable(valueAccessor());var $1=(String.isNullOrEmpty($0))?null:((LxnBase.Knockout.LinkBindingHandler.$1_0.test($0))?$0:'http://'+$0);$(element).attr('href',$1).text($0);}}
LxnBase.Knockout.ResBindingHandler=function(){LxnBase.Knockout.ResBindingHandler.initializeBase(this);}
LxnBase.Knockout.ResBindingHandler.get_resources=function(){return LxnBase.Knockout.ResBindingHandler.$1_0;}
LxnBase.Knockout.ResBindingHandler.prototype={update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=valueAccessor();if(String.isNullOrEmpty($0)){return;}var $enum1=ss.IEnumerator.getEnumerator(LxnBase.Knockout.ResBindingHandler.$1_0);while($enum1.moveNext()){var $1=$enum1.current;var $2=$1[$0];if(!String.isNullOrEmpty($2)){$(element).text($2);return;}}}}
LxnBase.Knockout.StringTemplate=function(id,text){this.$1=id;this.$2=text;this.$3={};LxnBase.Knockout.StringTemplate.$0[id]=this;}
LxnBase.Knockout.StringTemplate.get=function(id){return LxnBase.Knockout.StringTemplate.$0[id];}
LxnBase.Knockout.StringTemplate.prototype={renderTo:function(el,model){el.setAttribute('data-bind',"template: '"+this.$1+"'");ko.applyBindings(model,el);return el;},text:function(value){return (!arguments.length)?this.$2:this.$2=value;},data:function(key,value){return (arguments.length===1)?this.$3[key]:this.$3[key]=value;},$1:null,$2:null,$3:null}
LxnBase.Knockout.ViewBindingHandler=function(){LxnBase.Knockout.ViewBindingHandler.initializeBase(this);}
LxnBase.Knockout.ViewBindingHandler.prototype={init:function(element,valueAccessor,allBindingsAccessor,viewModel){$(element).attr('href','javascript:void(0)');},update:function(element,valueAccessor,allBindingsAccessor,viewModel){var $0=ko.mapping.toJS(valueAccessor());if(Type.canCast($0,Array)){var $1=$0;$(element).text($1[LxnBase.Data.Reference.NamePos]).click(function(){
LxnBase.UI.FormsRegistry.viewObject($1[LxnBase.Data.Reference.TypePos],$1[LxnBase.Data.Reference.IdPos]);});}else{var $2=$0;$(element).text($2.Name).click(function(){
LxnBase.UI.FormsRegistry.viewObject($2.Type,$2.Id);});}}}
Type.registerNamespace('LxnBase.Net');LxnBase.Net.WebServiceError=function(){}
LxnBase.Net.WebServiceError.prototype={Message:null,ExceptionType:null,ExceptionDetail:null,StackTrace:null,StatusText:null,StatusCode:0}
LxnBase.Net.WebServiceFailureArgs=function(error,method){this.$0=error;this.$1=method;}
LxnBase.Net.WebServiceFailureArgs.prototype={get_error:function(){return this.$0;},get_method:function(){return this.$1;},get_handled:function(){return this.$2;},set_handled:function(value){this.$2=value;return value;},toString:function(){return this.$0.Message;},$0:null,$1:null,$2:false}
LxnBase.Net.WebService=function(path){this.$1=path;}
LxnBase.Net.WebService.add_failure=function(value){LxnBase.Net.WebService.$0=ss.Delegate.combine(LxnBase.Net.WebService.$0,value);}
LxnBase.Net.WebService.remove_failure=function(value){LxnBase.Net.WebService.$0=ss.Delegate.remove(LxnBase.Net.WebService.$0,value);}
LxnBase.Net.WebService.prototype={get_timeOut:function(){return this.$2;},set_timeOut:function(value){this.$2=value;return value;},get_wrapper:function(){return this.$3;},set_wrapper:function(value){this.$3=value;return value;},invoke:function(method,args,useGet,wrapper,onSuccess,onError){var $0={};$0.url=LxnBase.Net.WebService.root+this.$1+'/'+method;$0.data=JSON.stringify(args);$0.dataType='text';$0.timeout=this.$2;if(useGet){$0.type='GET';}else{$0.type='POST';$0.contentType='application/json; charset=utf-8';}$.ajax($0).success(ss.Delegate.create(this,function($p1_0){
if(ss.isNullOrUndefined(onSuccess)){return;}var $1_0=JSON.parse($p1_0);wrapper=(wrapper||this.$3);onSuccess((!wrapper)?$1_0:$1_0[wrapper]);})).error(function($p1_0,$p1_1,$p1_2){
var $1_0=new LxnBase.Net.WebServiceError();switch($p1_1){case 'abort':$1_0.Message=String.format(LxnBase.BaseRes.webServiceAborted,method);break;case 'timeout':$1_0.Message=String.format(LxnBase.BaseRes.webServiceTimedOut,method);break;case 'parsererror':$1_0.Message=String.format(LxnBase.BaseRes.webServiceResponse_Error_Msg,method);break;case 'error':if(!String.isNullOrEmpty($p1_0.responseText)){$1_0=JSON.parse($p1_0.responseText);}else{$1_0.Message=String.format(LxnBase.BaseRes.webServiceFailedNoMsg,method);}break;}$1_0.StatusCode=$p1_0.status;$1_0.StatusText=$p1_1;var $1_1=new LxnBase.Net.WebServiceFailureArgs($1_0,method);if(LxnBase.Net.WebService.$0!=null){LxnBase.Net.WebService.$0($1_1);}if(onError!=null){onError($1_1);}if($p1_1!=='abort'){LxnBase.MessageRegister.error($1_1.toString(),$1_1.get_error().ExceptionType,$1_1.get_handled());}});},$1:null,$2:60000,$3:'d'}
Type.registerNamespace('LxnBase.UI');LxnBase.UI.IKeyHandler=function(){};LxnBase.UI.IKeyHandler.registerInterface('LxnBase.UI.IKeyHandler');LxnBase.UI.LoadMode=function(){};LxnBase.UI.LoadMode.prototype = {local:0,remote:1}
LxnBase.UI.LoadMode.registerEnum('LxnBase.UI.LoadMode',false);LxnBase.UI.$create_Versioned=function(){return {};}
LxnBase.UI.ActionFactory=function(){}
LxnBase.UI.ActionFactory.createListAction=function(type,text){return new Ext.Action(new Ext.ActionConfig().text(text).handler(function(){
LxnBase.UI.FormsRegistry.listObjects(type);}).toDictionary());}
LxnBase.UI.ActionFactory.createViewAction=function(type,id,text){return new Ext.Action(new Ext.ActionConfig().text(text).handler(function(){
LxnBase.UI.FormsRegistry.viewObject(type,id);}).toDictionary());}
LxnBase.UI.ActionFactory.createAction3=function(viewPage,text){return new Ext.Action(new Ext.ActionConfig().text(text).handler(function(){
eval("window.open('http://travel3/#/"+viewPage+"', 'LuxenaTravel3');");}).toDictionary());}
LxnBase.UI.BaseClassEditForm=function(args,instanceConfig){LxnBase.UI.BaseClassEditForm.initializeBase(this);this.init(args,instanceConfig);}
LxnBase.UI.BaseClassEditForm.prototype={get_args:function(){return this.$1A;},get_instanceConfig:function(){return this.$1B;},set_instanceConfig:function(value){this.$1B=value;return value;},get_instance:function(){return this.$1C;},set_instance:function(value){this.$1C=value;return value;},get_localMode:function(){return this.$1D;},init:function(args,itemConfig){this.$1A=args;this.$1B=itemConfig;this.$1D=ss.isValue(this.$1A.mode)&&!this.$1A.mode;if(this.$1A.onSave!=null){this.add_saved(this.$1A.onSave);}if(this.$1A.onCancel!=null){this.add_canceled(this.$1A.onCancel);}},open:function(){this.onWindowOpen();},onWindowOpen:function(){if(this.$1D){this.onInstanceLoaded(this.$1A.fieldValues);}else if(ss.isValue(this.$1A.idToLoad)){this.loadInstance(ss.Delegate.create(this,this.onInstanceLoaded));}else{this.onInstanceLoaded(null);}},onInstanceLoaded:function(result){if(!this.get_args().isCopy){this.$1C=result;}else{this.get_args().fieldValues=result;}var $0=String.format('{0} ({1})',this.getCaption(),(this.get_args().get_isNew())?LxnBase.BaseRes.creation:LxnBase.BaseRes.editing);this.get_window().setTitle($0);this.loadForm();this.setFieldValues();this.onLoaded();this.get_window().show();},getCaption:function(){return this.get_instanceConfig().Caption;},loadForm:function(){this.set_fields(this.addFields());var $0=this.addButtons();this.initComponentSequence(this.get_fields(),$0);this.onLoadForm();},addButtons:function(){this.saveButton=this.get_form().addButton(LxnBase.BaseRes.save,ss.Delegate.create(this,this.save));this.cancelButton=this.get_form().addButton(LxnBase.BaseRes.cancel,ss.Delegate.create(this,this.cancel));return [this.saveButton,this.cancelButton];},initComponentSequence:function(fields,buttons){var $0=[];$0.addRange(fields);$0.addRange(buttons);this.set_componentSequence($0);},onLoadForm:function(){},onLoaded:function(){},getInstancePropertyValue:function(fieldName){return (this.$1C!=null)?this.$1C[fieldName]:this.getArgsValue(fieldName);},getArgsValue:function(fieldName){if(this.$1A.fieldValues!=null&&!ss.isNullOrUndefined(this.$1A.fieldValues[fieldName])){return this.$1A.fieldValues[fieldName];}return null;},getFieldConfig:function(fieldName){for(var $0=0;$0<this.$1B.Columns.length;$0++){if(this.$1B.Columns[$0].Name===fieldName){return this.$1B.Columns[$0];}}return null;},createEditor:function(fieldName){return LxnBase.UI.AutoControls.ControlFactory.createEditor(this.getFieldConfig(fieldName));},getCustomActionStatus:function(actionName){var $0=this.get_instanceConfig().CustomActionPermissions;if($0!=null&&Object.keyExists($0,actionName)){return $0[actionName];}var $1=new LxnBase.Data.OperationStatus();$1.Visible=false;return $1;},startSave:function(){this.saveButton.disable();},failSave:function(result){try{LxnBase.UI.BaseClassEditForm.callBaseMethod(this, 'failSave',[result]);}finally{this.saveButton.enable();}},saveButton:null,cancelButton:null,$1A:null,$1B:null,$1C:null,$1D:false}
LxnBase.UI.BaseClassViewForm=function(tabId,id,type){LxnBase.UI.BaseClassViewForm.initializeBase(this,[new Ext.PanelConfig().closable(true).autoScroll(true).layout('fit').title(LxnBase.BaseRes.loading).cls('autoView').bodyCssClass('view-body').toDictionary(),tabId]);this._type=type;this.$5_4=id;LxnBase.Data.ConfigManager.getViewConfig(type,ss.Delegate.create(this,function($p1_0){
this.$5_3=$p1_0;LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_9,this.$5_3.IsCopyingAllowed);LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_7,this.$5_3.IsEditAllowed);LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_8,this.$5_3.IsRemovingAllowed);this.onLoadConfig();this.getInstance();}));}
LxnBase.UI.BaseClassViewForm.setActionStatus=function(action,status){if(ss.isNullOrUndefined(status)){return;}action.setHidden(!status.Visible);action.setDisabled(status.IsDisabled);action.tooltip=status.DisableInfo;}
LxnBase.UI.BaseClassViewForm.prototype={initComponent:function(){this.$5_7=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.edit_Lower).handler(ss.Delegate.create(this,this.edit)).hidden(true).toDictionary());this.$5_9=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.copy_Lower).handler(ss.Delegate.create(this,this.copy)).hidden(true).toDictionary());this.$5_8=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.remove_Lower).handler(ss.Delegate.create(this,this.deleteInstance)).hidden(true).toDictionary());var $0=[];$0.addRange([this.$5_7,this.$5_9,this.$5_8]);this.onInitToolBar($0);this.tbar=new Ext.Toolbar($0);LxnBase.UI.BaseClassViewForm.callBaseMethod(this, 'initComponent');},onInitToolBar:function(toolbarItems){},get_id:function(){return this.$5_4;},get_instanceType:function(){return this._type;},get_instance:function(){return this.$5_5;},get_permissions:function(){return this.$5_6;},get_itemConfig:function(){return this.$5_3;},onLoadConfig:function(){},load:function(result){this.$5_5=result;this.$5_1();this.onLoad();},refresh:function(result){if(result==null){return;}this.$5_5=result;this.$5_1();this.onRefresh();},updateActionsStatus:function(){LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_9,this.$5_3.IsCopyingAllowed);LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_7,this.$5_6.CanUpdate||this.$5_3.IsEditAllowed);LxnBase.UI.BaseClassViewForm.setActionStatus(this.$5_8,this.$5_6.CanDelete||this.$5_3.IsRemovingAllowed);this.setToolbarVisibility();},onRefresh:function(){this.body.clean();this.onLoad();},edit:function(){this.onEdit();},onEdit:function(){LxnBase.UI.FormsRegistry.editObject(this._type,this.$5_4,null,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;this.load((ss.isNullOrUndefined($1_0.Item))?$p1_0:$1_0.Item);}),null);},copy:function(){this.onCopy();},onCopy:function(){var $0={};var $enum1=ss.IEnumerator.getEnumerator(this.$5_3.Columns);while($enum1.moveNext()){var $1=$enum1.current;$0[$1.Name]=this.$5_5[$1.Name];}LxnBase.UI.FormsRegistry.editObject(this._type,null,$0,ss.Delegate.create(this,function($p1_0){
var $1_0=($p1_0).Item.Id;LxnBase.UI.FormsRegistry.viewObject(this._type,$1_0);}),null);},deleteInstance:function(){this.onDeleteInstance();},onDeleteInstance:function(){LxnBase.UI.MessageBoxWrap.confirm(LxnBase.BaseRes.confirmation,LxnBase.BaseRes.delete_Confirmation,ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_0!=='yes'){return;}LxnBase.Services.GenericService.Delete(this._type,[this.$5_4],null,ss.Delegate.create(this,function($p2_0){
var $2_0=$p2_0;if($2_0.Success){this.close();LxnBase.MessageRegister.info(this.$5_3.ListCaption,LxnBase.BaseRes.deleted+' '+this.title);}else{this.$5_2();}}),null);}));},onActivate:function(isFirst){if(!isFirst){this.getInstance();}},setToolbarVisibility:function(){var $0=true;var $1=this.getTopToolbar().items;var $2=$1.getCount();var $3=false;var $4=true;for(var $5=0;$5<$2;$5++){var $6=$1.itemAt($5);if(Type.canCast($6,Ext.Toolbar.Separator)){if(!$5||$5===$2-1||$3||$4){$6.setVisible(false);}$3=true;}else{$3=false;}if(!$6.hidden){$4=false;}}for(var $7=0;$7<$2;$7++){if(!($1.itemAt($7)).hidden){$0=false;}}if($0){this.getTopToolbar().setVisible(false);}},getCustomActionStatus:function(actionName){var $0=this.get_itemConfig().CustomActionPermissions;if($0!=null&&Object.keyExists($0,actionName)){return $0[actionName];}var $1=new LxnBase.Data.OperationStatus();$1.Visible=false;return $1;},$5_1:function(){var $0=this.$5_5.Permissions;if(!ss.isNullOrUndefined($0)){this.$5_6=$0;}if(ss.isNullOrUndefined(this.$5_6)){this.$5_6=new LxnBase.Data.OperationPermissions();}this.updateActionsStatus();},$5_2:function(){LxnBase.Services.GenericService.CanReplace(this._type,this.$5_4,ss.Delegate.create(this,function($p1_0){
if($p1_0){var $1_0=new LxnBase.UI.ReplaceForm(this._type,this.$5_4);$1_0.add_saved(ss.Delegate.create(this,function(){
this.close();}));$1_0.open();}else{LxnBase.UI.MessageBoxWrap.show(LxnBase.BaseRes.warning,LxnBase.BaseRes.autoGrid_DeleteConstrainedFailed_Msg+'<br/>'+LxnBase.BaseRes.autoGrid_ReplaceToAdmin_Msg,Ext.MessageBox.WARNING,Ext.MessageBox.OK);}}),null);},$5_3:null,_type:null,$5_4:null,$5_5:null,$5_6:null,$5_7:null,$5_8:null,$5_9:null}
LxnBase.UI.BaseEditForm=function(){this.$14=new Ext.util.MixedCollection();this.$F=new LxnBase.UI.Form(LxnBase.UI.BaseEditForm.$4().toDictionary());this.$E=new Ext.Window(this.$3().toDictionary());this.$19=new LxnBase.UI.FieldActionManager();}
LxnBase.UI.BaseEditForm.$4=function(){return new Ext.form.FormPanelConfig().autoScroll(true).bodyBorder(false).border(false).labelWidth(100).labelAlign('right').buttonAlign('center');}
LxnBase.UI.BaseEditForm.isFieldModified=function(field){return field!=null&&field.isDirty();}
LxnBase.UI.BaseEditForm.$9=function($p0){var $0=$p0;var $1=$0.getTarget('li');if(!ss.isNullOrUndefined($1)){Ext.ComponentMgr.get($1.id.split('errorFieldId-')[1]).focus();}$0.stopEvent();}
LxnBase.UI.BaseEditForm.textComponent=function(html){return new Ext.BoxComponent(new Ext.BoxComponentConfig().autoEl({tag:'div',html:html}).cls('x-form-item float-left box-label').toDictionary());}
LxnBase.UI.BaseEditForm.rowPanel=function(items){return new Ext.Panel(new Ext.PanelConfig().layout('form').itemCls('float-left').items(items).toDictionary());}
LxnBase.UI.BaseEditForm.prototype={add_saved:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_saved:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,add_canceled:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_canceled:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,add_close:function(value){this.$2=ss.Delegate.combine(this.$2,value);},remove_close:function(value){this.$2=ss.Delegate.remove(this.$2,value);},$2:null,get_window:function(){return this.$E;},get_form:function(){return this.$F;},get_fields:function(){return this.$12;},set_fields:function(value){this.$12=value;return value;},get_componentSequence:function(){return this.$13;},set_componentSequence:function(value){this.$13=value;return value;},get_isCanceled:function(){return this.$16;},get_isSaved:function(){return this.$15;},$3:function(){this.$10=new Ext.Panel(new Ext.PanelConfig().cls('errors').hidden(true).listeners({render:ss.Delegate.create(this,function(){
this.$10.getEl().on('click',LxnBase.UI.BaseEditForm.$9);})}).toDictionary());this.$11=new Ext.ux.StatusBar(new Ext.ux.StatusBarConfig().ctCls('status-bar').toDictionary());return new Ext.WindowConfig().baseCls('x-panel').cls('window-edit').resizable(false).listeners({afterrender:ss.Delegate.create(this,this.$5),show:ss.Delegate.create(this,this.$6),close:ss.Delegate.create(this,this.$7)}).modal(true).keys([{key:13,fn:ss.Delegate.create(this,this.$D),scope:this}]).items([this.$F,this.$10]).bbar(this.$11);},onValidate:function(){return true;},onSaved:function(result){this.$15=true;this.$E.close();},save:function(){if(this.validate()){this.onSave();}},completeSave:function(result){if(this.$0!=null){this.$0(result);}this.onSaved(result);},failSave:function(result){},cancel:function(){this.$16=true;this.$E.close();},registerField:function(field){if(this.$12==null){this.$12=new Array(0);}this.$12[this.$12.length]=field;},registerFocusComponent:function(component){if(this.$13==null){this.$13=new Array(0);}this.$13[this.$13.length]=component;},validate:function(){if(this.$F.getForm().isValid()&&this.onValidate()){return true;}this.$A();return false;},isModified:function(){if(this.$12==null){return false;}var $enum1=ss.IEnumerator.getEnumerator(this.$12);while($enum1.moveNext()){var $0=$enum1.current;if(LxnBase.UI.BaseEditForm.isFieldModified($0)){return true;}}return false;},applyActions:function(field,getActions){this.$19.add(field,getActions);},refreshActions:function(){this.$19.refresh();},handleKeyEvent:function(keyEvent){return this.$18.handleKeyEvent(keyEvent)||this.$19.handleKeyEvent(keyEvent);},restoreFocus:function(){this.$18.restoreFocus();},$5:function(){this.$18=LxnBase.UI.FieldNavigationManager.create(this.$13);this.$19.init(this.$18,this.get_form());if(this.$13==null){return;}var $enum1=ss.IEnumerator.getEnumerator(this.$13);while($enum1.moveNext()){var $0=$enum1.current;if($0.hidden){continue;}this.$E.defaultButton=$0;return;}},$6:function(){if(this.$12!=null){var $enum1=ss.IEnumerator.getEnumerator(this.$12);while($enum1.moveNext()){var $0=$enum1.current;$0.on('invalid',ss.Delegate.create(this,this.$8));$0.on('valid',ss.Delegate.create(this,this.$8));}}LxnBase.UI.EventsManager.registerKeyDownHandler(this,!this.$E.modal);this.$11.clearStatus();this.refreshWindowShadow();},$7:function(){if(!this.$15&&this.$1!=null){this.$1();}LxnBase.UI.EventsManager.unregisterKeyDownHandler(this);if(this.$2!=null){this.$2();}},$8:function($p0,$p1){if(!this.$17){(this.$11.statusEl).getEl().on('click',ss.Delegate.create(this,function(){
if(!this.$10.hidden){this.$B();}else if(this.$14.getCount()>0){this.$A();}}));this.$17=true;}if(!ss.isNullOrUndefined($p1)){this.$14.add($p0.id,{field:$p0,message:$p1});}else{this.$14.removeKey($p0.id);}this.$C();},$A:function(){if(!this.$10.hidden){return;}this.$10.setWidth(this.$F.getBox().width);this.$10.show();this.$11.setText(LxnBase.BaseRes.valiadationStatusHideError_Msg);this.refreshWindowShadow();},$B:function(){if(this.$10.hidden){return;}this.$10.hide();this.$11.setText(LxnBase.BaseRes.valiadationStatusSowError_Msg);this.refreshWindowShadow();},$C:function(){if(this.$14.getCount()>0){var $0='<ul>';this.$14.each(function($p1_0){
var $1_0=$p1_0.field;var $1_1=$p1_0.message;$0+=String.format("<li id='errorFieldId-{2}'><a href='javascript:void(0)'>{0}: {1}</a></li>",$1_0.fieldLabel,$1_1,$1_0.id);});new Ext.Template($0).overwrite(this.$10.body);if(this.$10.hidden&&this.$11.getText()!==LxnBase.BaseRes.valiadationStatusSowError_Msg){this.$11.setStatus(new Ext.ux.StatusBarConfig().text(LxnBase.BaseRes.valiadationStatusSowError_Msg).iconCls('error-icon').toDictionary());}else if(!this.$10.hidden&&this.$11.getText()!==LxnBase.BaseRes.valiadationStatusHideError_Msg){this.$11.setStatus(new Ext.ux.StatusBarConfig().text(LxnBase.BaseRes.valiadationStatusHideError_Msg).iconCls('error-icon').toDictionary());}}else{new Ext.Template('<div></div>').overwrite(this.$10.body);this.$10.hide();this.$11.clearStatus();this.refreshWindowShadow();}if(!this.$10.hidden){this.refreshWindowShadow();}},$D:function($p0,$p1){if(!$p1.shiftKey&&$p1.ctrlKey&&!$p1.altKey){}},refreshWindowShadow:function(){if(this.$F.ownerCt!=null&&Type.canCast(this.$F.ownerCt,Ext.Window)){this.$F.ownerCt.getEl().enableShadow(true);}},emptyRow:function(rowCount){if(!ss.isValue(rowCount)){rowCount=1;}return new Ext.Panel(new Ext.PanelConfig().height(29*rowCount).toDictionary());},tabPanel:function(height,items){return new Ext.TabPanel(new Ext.TabPanelConfig().items(items).activeTab(0).height(height).toDictionary());},tabPane:function(title,items){return new Ext.Panel(new Ext.PanelConfig().items(items).cls('main-data').layout('form').title(title).toDictionary());},tabMainPane:function(title,items){return new Ext.Panel(new Ext.PanelConfig().items(items).layout('form').cls('main-data').title(title).toDictionary());},tabColumnPane:function(title,items){return new Ext.Panel(new Ext.PanelConfig().items(items).layout('column').title(title).toDictionary());},tabFitPane:function(title,item){return new Ext.Panel(new Ext.PanelConfig().items([item]).layout('fit').title(title).toDictionary());},mainDataPanel:function(items){return new Ext.Panel(new Ext.PanelConfig().items(items).layout('form').cls('main-data').toDictionary());},columnPanel:function(items){return new Ext.Panel(new Ext.PanelConfig().items(items).layout('column').toDictionary());},formPanel:function(items){return new Ext.Panel(new Ext.PanelConfig().items(items).layout('form').toDictionary());},$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$15:false,$16:false,$17:false,$18:null,$19:null}
LxnBase.UI.EditFormArgs=function(id,type,fieldValues,pparams,onSave,onCancel,mode,isCopy){this.idToLoad=id;this.type=type;this.fieldValues=fieldValues;this.rangeRequest=pparams;this.onSave=onSave;this.onCancel=onCancel;this.mode=mode;this.isCopy=isCopy;}
LxnBase.UI.EditFormArgs.prototype={idToLoad:null,get_id:function(){return (this.isCopy)?null:this.idToLoad;},get_isNew:function(){return this.isCopy||!ss.isValue(this.idToLoad);},instance:null,type:null,fieldValues:null,rangeRequest:null,onSave:null,onCancel:null,mode:0,isCopy:false}
LxnBase.UI.EventsManager=function(){}
LxnBase.UI.EventsManager.registerKeyDownHandler=function(handler,allowBubbling){if(LxnBase.UI.EventsManager.$1.length>0){var $0=(LxnBase.UI.EventsManager.$1[LxnBase.UI.EventsManager.$1.length-1]);$0.set_focusedElement(document.activeElement);}LxnBase.UI.EventsManager.$1.add(new LxnBase.UI.KeyEventHandler(handler,allowBubbling));}
LxnBase.UI.EventsManager.unregisterKeyDownHandler=function(handler){if(ss.isNullOrUndefined(handler)){LxnBase.UI.EventsManager.$1.removeAt(LxnBase.UI.EventsManager.$1.length-1);}else{for(var $0=LxnBase.UI.EventsManager.$1.length-1;$0>=0;$0--){if((LxnBase.UI.EventsManager.$1[$0]).get_handler()===handler){LxnBase.UI.EventsManager.$1.removeAt($0);break;}}}if(LxnBase.UI.EventsManager.$1.length>0){var $1=(LxnBase.UI.EventsManager.$1[LxnBase.UI.EventsManager.$1.length-1]).get_focusedElement();if($1!=null){$1.focus();}}}
LxnBase.UI.EventsManager.$0=function($p0){for(var $0=LxnBase.UI.EventsManager.$1.length-1;$0>=0;$0--){var $1=LxnBase.UI.EventsManager.$1[$0];var $2=$1.get_handler();if($2.handleKeyEvent&&$2.handleKeyEvent($p0)||!$1.get_allowBubbling()){break;}}}
LxnBase.UI.FieldActionManager=function(){this.$7=[];this.$8=new Ext.menu.Menu(new Ext.menu.MenuConfig().cls('simple-menu testMenu').listeners({beforeshow:ss.Delegate.create(this,function(){
this.$8.tryActivate(0);})}).toDictionary());}
LxnBase.UI.FieldActionManager.prototype={get_$0:function(){return $(String.format('#{0}',this.$9));},init:function(navigationManager,form){this.$6=navigationManager;navigationManager.add_focusChanged(ss.Delegate.create(this,function(){
this.refresh();}));form.on('beforedestroy',ss.Delegate.create(this,function(){
this.$8.destroy();}));this.$9=String.format('{0}-field-action-button',form.id);this.$A=true;},add:function(field,getActions){field.on('changeValue',ss.Delegate.create(this,this.refresh));this.$7.add(new LxnBase.UI.FieldActions(field,getActions));},refresh:function(){if(!this.$A||!this.$7.length){return;}this.$2();var $enum1=ss.IEnumerator.getEnumerator(this.$7);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0;if($1.get_field()===this.$6.get_current()){$1.get_getActions()($1.get_field(),ss.Delegate.create(this,function($p1_0){
this.$1($1.get_field(),$p1_0);}));break;}}},handleKeyEvent:function(keyEvent){if(keyEvent.which!==Ext.EventObject.SPACE||!keyEvent.ctrlKey||keyEvent.altKey||keyEvent.shiftKey){return false;}if(!this.get_$0().length){return false;}this.$4();return true;},$1:function($p0,$p1){if($p1!=null&&$p1.length>0){this.$5($p1);this.$3($p0);}},$2:function(){this.get_$0().remove();},$3:function($p0){this.get_$0().remove();var $0=$('#'+$p0.id);var $1=$('<div></div>').attr('id',this.$9).addClass('field-action');$0.parent().append($1);var $2=$0.outerHeight()/2-$1.outerHeight()/2;var $3=$0.position().top+$2;var $4=$0.position().left+$0.outerWidth()-$1.outerWidth()-$2;$1.css('top',$3+'px');$1.css('left',$4+'px');$1.click(ss.Delegate.create(this,function(){
this.$4();}));},$4:function(){if(!this.get_$0().length){return;}this.$8.show(this.get_$0()[0],'tr-br?');},$5:function($p0){this.$8.removeAll();for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];this.$8.addMenuItem(new Ext.menu.ItemConfig().text($1.getText(null)).handler(ss.Delegate.create($1,$1.execute)).toDictionary());}},$6:null,$8:null,$9:null,$A:false}
LxnBase.UI.FieldActions=function(field,getActions){this.$0=field;this.$1=getActions;}
LxnBase.UI.FieldActions.prototype={get_field:function(){return this.$0;},get_getActions:function(){return this.$1;},$0:null,$1:null}
LxnBase.UI.FieldNavigationManager=function(components){this.$7=[];this.$7.addRange(components);var $enum1=ss.IEnumerator.getEnumerator(this.$7);while($enum1.moveNext()){var $0=$enum1.current;this.$1($0);}}
LxnBase.UI.FieldNavigationManager.create=function(components){return new LxnBase.UI.FieldNavigationManager(components);}
LxnBase.UI.FieldNavigationManager.$5=function($p0){if($p0==null){return;}$p0.focus();}
LxnBase.UI.FieldNavigationManager.prototype={add_focusChanged:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_focusChanged:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,get_current:function(){return this.$8;},handleKeyEvent:function(e){if(e.which!==Ext.EventObject.ENTER||e.ctrlKey||e.altKey){return false;}if(e.target.tagName.toLowerCase()==='button'&&!e.shiftKey){return true;}var $0=this.$8;if(Type.canCast($0,Ext.form.TextArea)&&!e.shiftKey){return true;}if(Type.canCast($0,Ext.Button)){if(e.shiftKey){e.stopPropagation();e.preventDefault();LxnBase.UI.FieldNavigationManager.$5(this.$4($0));}else{var $1=$0.getEl().child(($0).buttonSelector);if(document.activeElement!==$1.dom){LxnBase.UI.FieldNavigationManager.$5(this.$4($0));}}}else{this.$2(e,$0);}return true;},restoreFocus:function(){LxnBase.UI.FieldNavigationManager.$5(this.$8||this.$7[0]);},$1:function($p0){var $0=ss.Delegate.create(this,function(){
this.$8=$p0;this.$6();});if(Type.canCast($p0,Ext.form.Field)){$p0.on('focus',$0);}else if(Type.canCast($p0,Ext.Button)){var $1=$p0.getEl().child(($p0).buttonSelector);$1.on('focus',$0);}else{$p0.getEl().on('focus',$0);}},$2:function($p0,$p1){var $0=!$p0.shiftKey&&!$p0.ctrlKey&&!$p0.altKey;var $1=$p0.shiftKey&&!$p0.ctrlKey&&!$p0.altKey;if(!$0&&!$1){return;}$p0.preventDefault();$p0.stopPropagation();if(Type.canCast($p1,Ext.form.TriggerField)){$p1.triggerBlur();}if($1){LxnBase.UI.FieldNavigationManager.$5(this.$4($p1));}else{LxnBase.UI.FieldNavigationManager.$5(this.$3($p1));}},$3:function($p0){var $0=this.$7.indexOf($p0);for(var $1=$0+1;$1<this.$7.length;$1++){var $2=this.$7[$1];if(!$2.hidden&&!$2.disabled&&!(Type.canCast($2,Ext.form.DisplayField))){return $2;}}return null;},$4:function($p0){var $0=this.$7.indexOf($p0);for(var $1=$0-1;$1>=0;$1--){var $2=this.$7[$1];if(!$2.hidden&&!$2.disabled&&!(Type.canCast($2,Ext.form.DisplayField))){return $2;}}return null;},$6:function(){if(this.$0!=null){this.$0(this.$8);}},$8:null}
LxnBase.UI.Form=function(config){LxnBase.UI.Form.initializeBase(this,[config]);}
LxnBase.UI.Form.prototype={hideItem:function(field){if(field.rendered){var $0=field.getEl().findParent('.x-form-item');var $1=new Ext.Element($0);$1.addClass('x-hide-display');}else{field.itemCls='x-hide-display';}field.setVisible(false);},showItem:function(field){if(field.rendered){var $0=field.getEl().findParent('.x-form-item');var $1=new Ext.Element($0);$1.removeClass('x-hide-display');}field.setVisible(true);}}
LxnBase.UI.FormsRegistry=function(){}
LxnBase.UI.FormsRegistry.registerList=function(type,callback){if(Object.keyExists(LxnBase.UI.FormsRegistry.$2,type)){throw new Error(String.format("{0} form is alreay registered for type '{1}'",'List',type));}LxnBase.UI.FormsRegistry.$2[type]=callback;}
LxnBase.UI.FormsRegistry.registerDefaultList=function(callback){LxnBase.UI.FormsRegistry.$3=callback;}
LxnBase.UI.FormsRegistry.registerView=function(type,callback,hasForm){if(Object.keyExists(LxnBase.UI.FormsRegistry.$4,type)){throw new Error(String.format("{0} form is alreay registered for type '{1}'",'View',type));}var $0=new LxnBase.UI.ViewAction();$0.callback=callback;if(!ss.isUndefined(hasForm)){$0.hasForm=hasForm;}LxnBase.UI.FormsRegistry.$4[type]=$0;}
LxnBase.UI.FormsRegistry.registerDefaultView=function(callback){LxnBase.UI.FormsRegistry.$5=callback;}
LxnBase.UI.FormsRegistry.registerEdit=function(type,callback){if(Object.keyExists(LxnBase.UI.FormsRegistry.$6,type)){throw new Error(String.format("{0} form is alreay registered for type '{1}'",'Edit',type));}LxnBase.UI.FormsRegistry.$6[type]=callback;}
LxnBase.UI.FormsRegistry.registerDefaultEdit=function(callback){LxnBase.UI.FormsRegistry.$7=callback;}
LxnBase.UI.FormsRegistry.registerSelect=function(type,callback){if(Object.keyExists(LxnBase.UI.FormsRegistry.$8,type)){throw new Error(String.format("{0} form is alreay registered for type '{1}'",'Select',type));}LxnBase.UI.FormsRegistry.$8[type]=callback;}
LxnBase.UI.FormsRegistry.registerDefaultSelect=function(callback){LxnBase.UI.FormsRegistry.$9=callback;}
LxnBase.UI.FormsRegistry.listObjects=function(type,baseRequest,newTab){var $0=LxnBase.UI.FormsRegistry.$2[type]||LxnBase.UI.FormsRegistry.$3;if(ss.isNullOrUndefined($0)){throw new Error(String.format("There is no registered {0} form for type '{1}'",'list',type));}$0(new LxnBase.UI.ListArgs(type,baseRequest),newTab);}
LxnBase.UI.FormsRegistry.viewObject=function(type,id,newTab){var $0=(ss.isNullOrUndefined(LxnBase.UI.FormsRegistry.$4[type]))?LxnBase.UI.FormsRegistry.$5:(LxnBase.UI.FormsRegistry.$4[type]).callback;if(ss.isNullOrUndefined($0)){throw new Error(String.format("There is no registered {0} form for type '{1}'",'view',type));}$0(type,id,newTab);}
LxnBase.UI.FormsRegistry.hasViewForm=function(type){return ss.isNullOrUndefined(LxnBase.UI.FormsRegistry.$4[type])||(LxnBase.UI.FormsRegistry.$4[type]).hasForm;}
LxnBase.UI.FormsRegistry.editObject=function(type,id,values,onSave,onCancel,pparams,mode,isCopy){var $0=LxnBase.UI.FormsRegistry.$6[type]||LxnBase.UI.FormsRegistry.$7;if(ss.isNullOrUndefined($0)){throw new Error(String.format("There is no registered {0} form for type '{1}'",'edit',type));}$0(new LxnBase.UI.EditFormArgs(id,type,values,(ss.isValue(pparams))?pparams:null,onSave,onCancel,(ss.isValue(mode))?mode:1,isCopy));}
LxnBase.UI.FormsRegistry.selectObjects=function(type,baseRequest,singleSelect,onSelect,onCancel){var $0=LxnBase.UI.FormsRegistry.$8[type]||LxnBase.UI.FormsRegistry.$9;if(ss.isNullOrUndefined($0)){throw new Error(String.format("There is no registered {0} form for type '{1}'",'select',type));}$0(new LxnBase.UI.SelectArgs(type,baseRequest,singleSelect,onSelect,onCancel));}
LxnBase.UI.ViewAction=function(){this.hasForm=true;}
LxnBase.UI.ViewAction.prototype={callback:null,hasForm:false}
LxnBase.UI.Infos=function(){}
LxnBase.UI.Infos.init=function(){LxnBase.UI.Infos.$1=Ext.DomHelper.insertFirst(document.body,{id:'msg-div'},true);LxnBase.MessageRegister.add_newMessage(LxnBase.UI.Infos.$0);}
LxnBase.UI.Infos.$0=function($p0,$p1){if(!!$p1.get_type()){return;}var $0;var $1='';var $2='';var $3='';if(ss.isNullOrUndefined($p1.get_messageCaption())){$0=$p1.get_message();$1=$p1.get_details();}else{$0=$p1.get_messageCaption();if(!ss.isNullOrUndefined($p1.get_message())){$1=$p1.get_message();$3='<br/>';}if(!ss.isNullOrUndefined($p1.get_details())){$2="<div class='details'>"+$p1.get_details()+'</div';$1+=$3;}}$1+=$2;var $4=(["<div class='msg'><div class='x-box-tl'><div class='x-box-tr'><div class='x-box-tc'></div></div></div><div class='x-box-ml'><div class='x-box-mr'><div class='x-box-mc'><h3>",$0,'</h3>',$1,"</div></div></div><div class='x-box-bl'><div class='x-box-br'><div class='x-box-bc'></div></div></div></div>"]).join('');var $5=Ext.DomHelper.append(LxnBase.UI.Infos.$1,{html:$4},true);$5.slideIn('t',null).pause(3).ghost('t',{remove:true});}
LxnBase.UI.KeyEventHandler=function(handler,allowBubbling){this.$0=handler;this.$1=allowBubbling;}
LxnBase.UI.KeyEventHandler.prototype={get_handler:function(){return this.$0;},set_handler:function(value){this.$0=value;return value;},get_allowBubbling:function(){return this.$1;},set_allowBubbling:function(value){this.$1=value;return value;},get_focusedElement:function(){return this.$2;},set_focusedElement:function(value){this.$2=value;return value;},$0:null,$1:false,$2:null}
LxnBase.UI.ListArgs=function(type,baseRequest){if(baseRequest!=null){baseRequest.ClassName=type;}this.type=type;this.baseRequest=baseRequest;}
LxnBase.UI.ListArgs.prototype={type:null,baseRequest:null}
LxnBase.UI.LxnMenu=function(config){LxnBase.UI.LxnMenu.initializeBase(this,[config]);}
LxnBase.UI.LxnMenu.prototype={tryActivateItem:function(itemIndex){this.tryActivate(itemIndex,itemIndex+1);}}
LxnBase.UI.MessageBoxWrap=function(){}
LxnBase.UI.MessageBoxWrap.show=function(title,msg,icon,buttons,func){var $0=title;if(Type.canCast(title,String)){var $3={title:title,msg:msg,icon:icon,buttons:buttons};if(!ss.isNullOrUndefined(func)){$3['fn']=func;}$0=$3;}var $1=$0.fn;$0.fn=LxnBase.UI.MessageBoxWrap.$0($1);var $2=Ext.MessageBox.show($0);LxnBase.UI.EventsManager.registerKeyDownHandler($2,false);}
LxnBase.UI.MessageBoxWrap.confirm=function(title,msg,fn){var $0=Ext.MessageBox.confirm(title,msg,LxnBase.UI.MessageBoxWrap.$0(fn));LxnBase.UI.EventsManager.registerKeyDownHandler($0,false);}
LxnBase.UI.MessageBoxWrap.prompt=function(title,msg,fn){var $0=Ext.MessageBox.prompt(title,msg,LxnBase.UI.MessageBoxWrap.$0(fn));LxnBase.UI.EventsManager.registerKeyDownHandler($0,false);}
LxnBase.UI.MessageBoxWrap.$0=function($p0){if(ss.isNullOrUndefined($p0)){return function(){
LxnBase.UI.EventsManager.unregisterKeyDownHandler();};}return function($p1_0,$p1_1){
LxnBase.UI.EventsManager.unregisterKeyDownHandler();$p0($p1_0,$p1_1);};}
LxnBase.UI.Messages=function(config){if(!Object.keyExists(config,'title')){config['title']=LxnBase.BaseRes.messages_Title;}this.$4=new Ext.Panel(config);this.$4.addListener('expand',ss.Delegate.create(this,this.$2));LxnBase.MessageRegister.add_newMessage(ss.Delegate.create(this,this.$0));}
LxnBase.UI.Messages.$1=function($p0){var $0=document.createElement('div');$0.className='message';var $1=document.createElement('div');var $2='messageIcon ';if(!$p0.get_type()){$2+='info';}else if($p0.get_type()===1){$2+='warn';}else if($p0.get_type()===2){$2+='error';}$1.className=$2;$0.appendChild($1);var $3=document.createElement('div');$3.className='messageTimestamp';$3.innerHTML=Date.get_now().format('H:i:s');$0.appendChild($3);var $4=document.createElement('div');$4.className='messageCaption';if(!ss.isNullOrUndefined($p0.get_messageCaption())){$4.innerHTML=$p0.get_messageCaption();if(!ss.isNullOrUndefined($p0.get_message())){$4.innerHTML+=': '+$p0.get_message();}}else{$4.innerHTML=$p0.get_message();}$0.appendChild($4);if(!String.isNullOrEmpty($p0.get_details())){var $5=document.createElement('div');$5.className='messageDetails';$5.innerHTML=$p0.get_details();$0.appendChild($5);}return $0;}
LxnBase.UI.Messages.prototype={get_widget:function(){return this.$4;},setLayoutRegion:function(region){this.$5=region;this.$8=document.createElement('div');this.$8.className='message-count';var $0=this.$5.getCollapsedEl().dom;$0.addEventListener('click',ss.Delegate.create(this,function(){
this.$2();}),false);$0.insertBefore(this.$8,$0.firstChild);},$0:function($p0,$p1){if($p1.get_handled()){return;}if(this.$6==null){this.$6=document.createElement('div');this.$4.body.dom.appendChild(this.$6);}var $0=LxnBase.UI.Messages.$1($p1);var $1=(!this.$6.children.length)?null:this.$6.children[0];if($1==null){this.$6.appendChild($0);}else{this.$6.insertBefore($0,$1);}if(this.$6.children.length>50){this.$6.removeChild(this.$6.children[this.$6.children.length-1]);}if(this.$8!=null&&this.$4.collapsed){++this.$7;this.$8.innerHTML=LxnBase.StringUtility.getNumberText(this.$7,LxnBase.BaseRes.unreadMessageCount_Msg1,LxnBase.BaseRes.unreadMessageCount_Msg2,LxnBase.BaseRes.unreadMessageCount_Msg3);}},$2:function(){this.$7=0;if(this.$8!=null){this.$8.innerHTML='';}},$4:null,$5:null,$6:null,$7:0,$8:null}
LxnBase.UI.PropertyFilterExtention=function(){}
LxnBase.UI.PropertyFilterExtention.createFilter=function(propertyName,op,value,not){var $0=new LxnBase.Data.PropertyFilterCondition();$0.Not=not;$0.Operator=op;$0.Value=value;var $1=new LxnBase.Data.PropertyFilter();$1.Property=propertyName;$1.Conditions=[$0];return $1;}
LxnBase.UI.ReplaceForm=function(type,id){LxnBase.UI.ReplaceForm.initializeBase(this);this.$1D=type;this.$1E=id;this.get_window().setTitle(LxnBase.BaseRes.replaceDelete);this.get_window().cls+=' replace-form';this.get_form().labelWidth=true;this.$1C();this.$21=this.get_form().addButton(LxnBase.BaseRes.replace,ss.Delegate.create(this,this.save));this.$22=this.get_form().addButton(LxnBase.BaseRes.cancel,ss.Delegate.create(this,this.cancel));this.set_fields([this.$20.get_widget()]);this.set_componentSequence([this.$20.get_widget(),this.$21,this.$22]);}
LxnBase.UI.ReplaceForm.exec=function(className,id,tab){LxnBase.Services.GenericService.CanReplace(className,id,function($p1_0){
if($p1_0){var $1_0=new LxnBase.UI.ReplaceForm(className,id);if(ss.isValue(tab)){$1_0.add_saved(function(){
LxnBase.UI.Tabs.close(tab);});}$1_0.open();}else{LxnBase.UI.MessageBoxWrap.show(LxnBase.BaseRes.warning,LxnBase.BaseRes.autoGrid_DeleteConstrainedFailed_Msg+'<br/>'+LxnBase.BaseRes.autoGrid_ReplaceToAdmin_Msg,Ext.MessageBox.WARNING,Ext.MessageBox.OK);}},null);}
LxnBase.UI.ReplaceForm.prototype={open:function(){LxnBase.Data.ConfigManager.getViewConfig(this.$1D,ss.Delegate.create(this,function($p1_0){
this.$24=$p1_0;LxnBase.Services.GenericService.GetDependencies(this.$1D,this.$1E,ss.Delegate.create(this,this.$1A),null);}));},$1A:function($p0){this.$23=$p0;this.$1F.autoEl={html:this.$1B()};this.get_window().show();},$1B:function(){var $0=String.format('<b>{0}</b>',this.$23.Name);var $1=new ss.StringBuilder();$1.append(String.format(LxnBase.BaseRes.replaceForm_ObjectForReplace,$0));$1.append('<br/><br/>');$1.append(LxnBase.BaseRes.replaceForm_ReplacingObject);return $1.toString();},$1C:function(){this.$1F=new Ext.BoxComponent(new Ext.BoxComponentConfig().cls('x-form-item delete-message').toDictionary());this.$20=new LxnBase.UI.Controls.ObjectSelector(new LxnBase.UI.Controls.ObjectSelectorConfig().setClass(this.$1D).selectOnFocus(true).width(250).name('replacingObject').hideLabel(true).labelSeparator(''));this.get_form().add(this.$1F);this.get_form().add(this.$20.get_widget());},onSave:function(){var $0=this.$20.getObjectId();if(ss.isValue($0)){LxnBase.Services.GenericService.Replace(this.$1D,this.$1E,$0,true,ss.Delegate.create(this,this.completeSave),null);}else{Ext.MessageBox.confirm('\u0417\u0430\u043c\u0435\u043d\u0430','\u0412\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043b\u0438 \u043d\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u0412\u0441\u0435 \u0441\u0432\u044f\u0437\u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u044b \u043d\u0430 \u043f\u0443\u0441\u0442\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?',ss.Delegate.create(this,function(){
LxnBase.Services.GenericService.Replace(this.$1D,this.$1E,$0,true,ss.Delegate.create(this,this.completeSave),null);}));}},onSaved:function(result){LxnBase.MessageRegister.info(this.$24.ListCaption,String.format(LxnBase.BaseRes.replaceForm_ReplaceComplete_Msg,this.$23.Name,this.$20.getObjectName()));LxnBase.UI.ReplaceForm.callBaseMethod(this, 'onSaved',[result]);},$1D:null,$1E:null,$1F:null,$20:null,$21:null,$22:null,$23:null,$24:null}
LxnBase.UI.SelectArgs=function(type,baseRequest,singleSelect,onSelect,onCancel){this.type=type;this.baseRequest=baseRequest;this.singleSelect=singleSelect;this.onSelect=onSelect;this.onCancel=onCancel;}
LxnBase.UI.SelectArgs.prototype={type:null,baseRequest:null,singleSelect:false,onSelect:null,onCancel:null}
LxnBase.UI.Tab=function(config,tabIdentifier){LxnBase.UI.Tab.initializeBase(this,[config]);this.$5_0=tabIdentifier;}
LxnBase.UI.Tab.prototype={initComponent:function(){LxnBase.UI.Tab.callBaseMethod(this, 'initComponent');var $0=true;this.on('activate',ss.Delegate.create(this,function(){
this.onActivate($0);$0=false;}));this.on('deactivate',ss.Delegate.create(this,this.onDeactivate));},get_tabIdentifier:function(){return this.$5_0;},set_tabIdentifier:function(value){this.$5_0=value;return value;},restoreFocus:function(){},handleKeyEvent:function(keyEvent){return false;},close:function(){LxnBase.UI.Tabs.close(this);},beforeActivate:function(pparams){},onActivate:function(isFirst){},onDeactivate:function(){},$5_0:null}
LxnBase.UI.Tabs=function(){}
LxnBase.UI.Tabs.init=function(config){config['deferredRender']=false;config['activeTab']=0;config['enableTabScroll']=true;config['minTabWidth']=100;LxnBase.UI.Tabs.$0=new Ext.TabPanel(config);LxnBase.UI.EventsManager.registerKeyDownHandler(LxnBase.UI.Tabs,false);}
LxnBase.UI.Tabs.get_widget=function(){return LxnBase.UI.Tabs.$0;}
LxnBase.UI.Tabs.open=function(newTab,tabIdentifier,callback,onActivateParams){var $0=null;if(!newTab){$0=LxnBase.UI.Tabs.findTab(tabIdentifier);}if($0!=null){$0.beforeActivate(onActivateParams);LxnBase.UI.Tabs.$0.setActiveTab($0.id);}else{$0=callback(tabIdentifier);if($0!=null){LxnBase.UI.Tabs.$0.add($0);LxnBase.UI.Tabs.$0.setActiveTab($0.id);}}}
LxnBase.UI.Tabs.handleKeyEvent=function(keyEvent){var $0=keyEvent.which;var $1=!keyEvent.ctrlKey&&!keyEvent.shiftKey&&keyEvent.altKey;var $2=keyEvent.ctrlKey&&!keyEvent.shiftKey&&!keyEvent.altKey;if($0===Ext.EventObject.LEFT&&$1){keyEvent.preventDefault();keyEvent.stopPropagation();var $4=LxnBase.UI.Tabs.$0.items;var $5=$4.getCount();var $6=$4.indexOf(LxnBase.UI.Tabs.$0.getActiveTab())-1;if($6<0){$6=$5-1;}LxnBase.UI.Tabs.$0.setActiveTab($6);return true;}if($0===Ext.EventObject.RIGHT&&$1){keyEvent.preventDefault();keyEvent.stopPropagation();var $7=LxnBase.UI.Tabs.$0.items;var $8=$7.getCount();var $9=$7.indexOf(LxnBase.UI.Tabs.$0.getActiveTab())+1;if($9===$8){$9=0;}LxnBase.UI.Tabs.$0.setActiveTab($9);return true;}if($0===Ext.EventObject.W&&$2){keyEvent.preventDefault();keyEvent.stopPropagation();var $A=LxnBase.UI.Tabs.$0.getActiveTab();if($A.closable){LxnBase.UI.Tabs.close($A);}return true;}if($1&&($0>=Ext.EventObject.NUM_ZERO&&$0<=Ext.EventObject.NUM_NINE||$0>=Ext.EventObject.ZERO&&$0<=Ext.EventObject.NINE)){keyEvent.preventDefault();keyEvent.stopPropagation();var $B=LxnBase.UI.Tabs.$0.items;var $C=$B.getCount();var $D=($0<=Ext.EventObject.NINE)?Ext.EventObject.ZERO:Ext.EventObject.NUM_ZERO;var $E=($0===$D)?9:$0-$D-1;if($E<$C){LxnBase.UI.Tabs.$0.setActiveTab($E);}return true;}var $3=LxnBase.UI.Tabs.$0.activeTab;$3.handleKeyEvent(keyEvent);return false;}
LxnBase.UI.Tabs.findTab=function(tabId){var $0=LxnBase.UI.Tabs.$0.items;for(var $1=0;$1<$0.getCount();$1++){var $2=$0.itemAt($1);if($2.get_tabIdentifier()===tabId){return $2;}}return null;}
LxnBase.UI.Tabs.close=function(tab){LxnBase.UI.Tabs.$0.remove(tab);}
Type.registerNamespace('LxnBase.UI.AutoControls');LxnBase.UI.AutoControls.ListMode=function(){};LxnBase.UI.AutoControls.ListMode.prototype = {list:0,select:1}
LxnBase.UI.AutoControls.ListMode.registerEnum('LxnBase.UI.AutoControls.ListMode',false);LxnBase.UI.AutoControls.IReportProvider=function(){};LxnBase.UI.AutoControls.IReportProvider.registerInterface('LxnBase.UI.AutoControls.IReportProvider');LxnBase.UI.AutoControls.AutoGrid=function(args,config){this.$7_35=-1;LxnBase.UI.AutoControls.AutoGrid.initializeBase(this,[config.cls('autoList').border(false).bodyBorder(false).frame(true).stripeRows(true).header(false).loadMask(true).autoScroll(true).autoHeight(false).clicksToEdit(2).deferRowRender(false).region('center').custom('_args',args).toDictionary()]);}
LxnBase.UI.AutoControls.AutoGrid.$7_1E=function($p0,$p1){switch($p1.Type){case 4:case 0:return String.format("'{0}'",$p0);case 3:if($p0){return LxnBase.BaseRes.filter_True;}return LxnBase.BaseRes.filter_False;case 5:var $0=LxnBase.UI.AutoControls.ControlFactory.createRenderer($p1);return String.format("'{0}'",$0($p0));case 2:var $1=($p0);var $2=LxnBase.UI.AutoControls.ControlFactory.createRenderer($p1);var $3='';if($1.length===1){$3=String.format("'{0}'",$2($1[0]));}else{var $4='';var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $5=$enum1.current;$3+=String.format("{0}'{1}'",$4,$2(Type.getInstanceType($5)));$4=', ';}$3=String.format('({0})',$3);}return $3;}return $p0;}
LxnBase.UI.AutoControls.AutoGrid.prototype={add_onSelect:function(value){this.$7_0=ss.Delegate.combine(this.$7_0,value);},remove_onSelect:function(value){this.$7_0=ss.Delegate.remove(this.$7_0,value);},$7_0:null,add_onCancelSelect:function(value){this.$7_1=ss.Delegate.combine(this.$7_1,value);},remove_onCancelSelect:function(value){this.$7_1=ss.Delegate.remove(this.$7_1,value);},$7_1:null,get_createAction:function(){return this.$7_29;},get_editAction:function(){return this.$7_2A;},get_copyAction:function(){return this.$7_2B;},get_deleteAction:function(){return this.$7_2C;},get_exportAction:function(){return this.$7_2D;},initComponent:function(){this.$7_27=this._args.baseRequest||new LxnBase.Data.RangeRequest();this.$7_27.ClassName=this._args.type;if(!this._args.nonPaged&&(!ss.isNullOrUndefined(this.$7_27.limit)||!this.$7_27.limit)){this.$7_27.limit=(!this._args.mode)?25:10;}this.tbar=this.$7_B();if(!ss.isValue(this.store)){this.store=this.$7_5();}if(!ss.isValue(this.selModel)){this.selModel=this.$7_7();}if(!ss.isValue(this._args.columnsConfig)){this._args.columnsConfig=this.$7_A();}var $0=[];$0.addRange(this._args.columnsConfig);this.colModel=this.$7_9(this._args.columnsConfig);if(!ss.isValue(this.view)){this.view=new LxnBase.UI.AutoControls.AutoGridView(new Ext.grid.GridViewConfig().forceFit(true).toDictionary());}(this.view).setColumns($0);this.$7_6(this.store);this.$7_8(this.selModel);if(!this._args.nonPaged){this.$7_28=new LxnBase.UI.AutoControls.GridFilterPlugin(this);this.plugins=[this.$7_28];this.bbar=this.$7_C();}this.on('render',ss.Delegate.create(this,this.$7_3));LxnBase.UI.AutoControls.AutoGrid.callBaseMethod(this, 'initComponent');},get_baseRequest:function(){return this.$7_27;},get_args:function(){return this._args;},get_listConfig:function(){return this._args.listConfig;},get_gridView:function(){return this.getView();},get_columnModel:function(){return this.getColumnModel();},get_selectionModel:function(){return this.getSelectionModel();},reload:function(reinitPaging){this.stopEditing();this.$7_27.VisibleProperties=this.$7_18();if(reinitPaging){this.store.reload({params:{start:0}});}else{this.store.reload();}},refresh:function(){var $0=this.store.getRange();if(!$0.length){return;}var $1=new Array($0.length);for(var $2=0;$2<$1.length;++$2){if($0[$2].id==null){continue;}$1[$2]=$0[$2].id;}LxnBase.Services.GenericService.Refresh(this._args.type,$1,this.$7_18(),this._args.forcedProperties,ss.Delegate.create(this,function($p1_0){
if($p1_0==null){return;}var $1_0=$p1_0;for(var $1_1=0;$1_1<$1_0.length;++$1_1){var $1_2=$1_0[$1_1];if($1_2==null){($0[$1_1].data).__deleted=true;}else{$0[$1_1].data=(this.store.reader).readData($1_2);}$0[$1_1].commit();}}),null);},reloadGrid:function(request){request.VisibleProperties=this.$7_18();request.HiddenProperties=this._args.forcedProperties;request.limit=this.$7_27.limit;this.store.reload({params:request});},updateRecord:function(values,record){var $0=values;var $1=record.fields.getRange();var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.name;if(Object.keyExists($0,$3)){record.data[$3]=$0[$3];}}record.commit();},getColumnConfig:function(columnIndex){return this.tryGetColumnConfigByName((this.colModel).getColumnId(columnIndex));},getColumnConfigByName:function(name){var $0=this.tryGetColumnConfigByName(name);if($0==null){throw new Error('Unknown column name: '+name);}return $0;},tryGetColumnConfigByName:function(name){var $0=this.get_listConfig().Columns;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1.Name===name){return $1;}}return null;},handleKeyEvent:function(keyEvent){var $0=Ext.EventObject;var $1=keyEvent.which;var $2=keyEvent.ctrlKey||keyEvent.shiftKey||keyEvent.altKey;var $3=keyEvent.ctrlKey&&!keyEvent.shiftKey&&!keyEvent.altKey;if($1===$0['UP']){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_21();return true;}if($1===$0['DOWN']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_21();return true;}if($1===$0['F2']&&!$2){if(this.get_selectionModel().getSelections().length!==1){return true;}keyEvent.preventDefault();keyEvent.stopPropagation();this.startEditing(this.store.indexOf(this.get_selectionModel().getSelected()),1);return true;}if($1===$0['ESC']){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_21();return true;}if($1===$0['F']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_31.focus();return true;}if(!this._args.mode){if($1===$0['INSERT']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();if(!this.get_listConfig().IsCreationAllowed.IsDisabled&&this.get_listConfig().IsCreationAllowed.Visible){this.create(this._args.type);}return true;}if($1===$0['DELETE']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();if(!this.get_listConfig().IsRemovingAllowed.IsDisabled&&this.get_listConfig().IsRemovingAllowed.Visible){this.$7_F();}return true;}if($1===$0['ENTER']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_E();return true;}if($1===$0['ENTER']&&!keyEvent.ctrlKey&&keyEvent.shiftKey&&!keyEvent.altKey){keyEvent.preventDefault();keyEvent.stopPropagation();if(!this.get_selectionModel().getSelections().length){return true;}if(!this.get_listConfig().IsEditAllowed.IsDisabled&&this.get_listConfig().IsEditAllowed.Visible){this.edit();}return true;}if($1===$0['D']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();if(!this.get_listConfig().IsCreationAllowed.IsDisabled&&this.get_listConfig().IsCreationAllowed.Visible){this.$7_D();}return true;}}else{if($1===$0['ENTER']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();this.$7_11();return true;}}if($1===$0['PAGE_UP']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();if(this.$7_33>1){this.$7_32.changePage(this.$7_33-1);}return true;}if($1===$0['PAGE_DOWN']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();if(this.$7_33<this.$7_34){this.$7_32.changePage(this.$7_33+1);}return true;}if($1===$0['HOME']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();if(this.$7_33!==1){this.$7_32.changePage(1);}this.get_selectionModel().selectRow(0);return true;}if($1===$0['END']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();if(this.$7_33!==this.$7_34){this.$7_32.changePage(this.$7_34);}this.get_selectionModel().selectRow(this.store.getCount()-1);return true;}if($1===$0['HOME']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();this.get_selectionModel().selectRow(0);return true;}if($1===$0['END']&&!$2){keyEvent.preventDefault();keyEvent.stopPropagation();this.get_selectionModel().selectRow(this.store.getCount()-1);return true;}if($1===$0['R']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();this.reload(false);return true;}if($1===$0['G']&&$3){keyEvent.preventDefault();keyEvent.stopPropagation();var $4=this.$7_32['field'];$4.focus();return true;}return false;},reloadWithData:function(values){(this.store.proxy).setResponse(values);this.reload(false);this.get_selectionModel().selectRow(values.SelectedRow);},getSelectedIds:function(){var $0=this.get_selectionModel().getSelections();var $1=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$1.add($2.id);}return $1;},getSelectedItems:function(){var $0=this.get_selectionModel().getSelections();var $1=new Array($0.length);for(var $2=0;$2<$0.length;$2++){$1[$2]=this.$7_2($0[$2]);}return $1;},$7_2:function($p0){var $0=new LxnBase.Data.Reference();$0.Id=$p0.id;$0.Name=this.$7_23($p0);$0.Type=this.$7_22($p0);return $0;},$7_3:function(){this.get_gridView().on('refresh',ss.Delegate.create(this,function(){
if(!this.store.getCount()){return;}if(this.$7_35!==-1){this.get_selectionModel().selectRow(this.$7_35);return;}var $1_0=(this.get_selectionModel()['lastActive']||0);if(!!$1_0){if($1_0>=this.store.getCount()){$1_0=this.store.getCount()-1;}this.get_selectionModel().selectRow($1_0);this.get_gridView().focusRow($1_0);}}));this.$7_4();},$7_4:function(){if(this._args.nonPaged){LxnBase.Services.GenericService.GetRange(this._args.type,null,ss.Delegate.create(this,function($p1_0){
this.store.loadData(($p1_0).List);}),null);}else{this.$7_27.VisibleProperties=this.$7_18();this.$7_27.HiddenProperties=this._args.forcedProperties;this.store.load();}},$7_5:function(){var $0;var $1=this.get_listConfig().Columns;var $2=[];$2.add('Id');$2.add('__class');$2.add('Version');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;$2.add($3.Name);}if(this._args.nonPaged){$0=new Ext.data.ArrayStore(new Ext.data.ArrayStoreConfig().id(0).fields($2).toDictionary());}else{var $4=LxnBase.Services.GenericService.getRangeProxy(this._args.type);$4.on('load',ss.Delegate.create(this,this.$7_1C));$0=new LxnBase.Data.GenericStore(new Ext.data.StoreConfig().baseParams(this.$7_27).proxy($4).reader(new LxnBase.Data.RangeReader({id:0,root:'List',totalProperty:'TotalCount'},$2)).remoteSort(true).toDictionary());}return $0;},$7_6:function($p0){$p0.on('update',ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if($p1_2!==Ext.data.Record.EDIT){return;}this.$7_16($p1_1);}));},$7_7:function(){var $0=new Ext.grid.CheckboxSelectionModel();$0.singleSelect=this.get_listConfig().SingleSelect;return $0;},$7_8:function($p0){$p0.on('selectionchange',ss.Delegate.create(this,this.$7_1B));},$7_9:function($p0){if(!(this.selModel).singleSelect){$p0.insert(0,this.selModel);}return new Ext.grid.ColumnModel(new Ext.grid.ColumnModelConfig().columns($p0).listeners({hiddenchange:ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if(this.$7_31.getValue()!=null&&this.$7_17(false)){this.reload(true);}else if(!$p1_2){this.reload(false);}})}).toDictionary());},$7_A:function(){var $0=this.get_listConfig().Columns;var $1=[];var $2=!ss.isNullOrUndefined(this.$7_27.VisibleProperties);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;if(this._args.mode===1&&!$3.Type){($3).RenderAsString=true;}var $4=LxnBase.UI.AutoControls.ControlFactory.createRenderer($3);if(!this._args.mode&&$4==null&&$3.IsReference&&LxnBase.UI.FormsRegistry.hasViewForm(this._args.type)){$4=LxnBase.UI.AutoControls.ControlFactory.createRefrenceRenderer(this._args.type);}var $5=null;if(!this._args.mode&&!$3.IsReadOnly&&this.get_listConfig().IsQuickEditAllowed){$5=LxnBase.UI.AutoControls.ControlFactory.createEditor($3,true);}var $6=new Ext.grid.ColumnConfig().id($3.Name).header($3.Caption||$3.Name).sortable($3.IsPersistent).dataIndex($3.Name).hidden(($2)?!this.$7_27.VisibleProperties.contains($3.Name):$3.Hidden);if($4!=null){$6.renderer($4);}if($5!=null){$6.editor($5);}if(!!$3.ListWidth){$6.width($3.ListWidth);}$1.add($6.toDictionary());}return $1;},$7_B:function(){var $0=[];if(!this._args.mode){if(this.get_listConfig().IsCreationAllowed.Visible&&!this.get_listConfig().UseCustomCreation){this.$7_29=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.createItem_Lower).handler(ss.Delegate.create(this,function(){
this.create(this._args.type);})).disabled(this.get_listConfig().IsCreationAllowed.IsDisabled).custom('tooltip',this.get_listConfig().IsCreationAllowed.DisableInfo).toDictionary());$0.add(this.$7_29);}if(this.get_listConfig().IsEditAllowed.Visible){this.$7_2A=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.edit_Lower).disabled(true).handler(ss.Delegate.create(this,this.edit)).custom('tooltip',this.get_listConfig().IsEditAllowed.DisableInfo).toDictionary());$0.add(this.$7_2A);}if(this.get_listConfig().IsCopyingAllowed.Visible){this.$7_2B=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.copy_Lower).disabled(true).handler(ss.Delegate.create(this,this.$7_D)).custom('tooltip',this.get_listConfig().IsCreationAllowed.DisableInfo).toDictionary());$0.add(this.$7_2B);}if(this.get_listConfig().IsRemovingAllowed.Visible){this.$7_2C=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.remove_Lower).disabled(true).handler(ss.Delegate.create(this,this.$7_F)).custom('tooltip',this.get_listConfig().IsRemovingAllowed.DisableInfo).toDictionary());$0.add(this.$7_2C);}this._args.onCreateActionToolbar($0,this);if(!this._args.nonPaged){this.$7_30=new Ext.Button(new Ext.ButtonConfig().text(LxnBase.BaseRes.autoGrid_ResetFilter_Title).disabled(true).handler(ss.Delegate.create(this,this.$7_19)).toDictionary());if($0.length>0){$0.add('-');}$0.add(this.$7_30);}this.$7_2E=new Ext.menu.Item(new Ext.menu.ItemConfig().text(LxnBase.BaseRes.export_Selection).handler(ss.Delegate.create(this,function(){
this.$7_10(1);})).disabled(true).toDictionary());this.$7_2D=new Ext.Action(new Ext.ActionConfig().iconCls('export').disabled(false).custom('menu',new Ext.menu.Menu(new Ext.menu.MenuConfig().items([new Ext.menu.Item(new Ext.menu.ItemConfig().text(LxnBase.BaseRes.export_All).handler(ss.Delegate.create(this,function(){
this.$7_10(0);})).toDictionary()),this.$7_2E,new Ext.menu.Item(new Ext.menu.ItemConfig().text(LxnBase.BaseRes.export_ExceptSelection).handler(ss.Delegate.create(this,function(){
this.$7_10(2);})).toDictionary())]).listeners({beforeshow:ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=this.store.getTotalCount();var $1_2=this.get_selectionModel().getSelections().length;var $1_3=($1_0.items).itemAt(0);$1_3.setText(String.format(LxnBase.BaseRes.export_All,$1_1));$1_3=($1_0.items).itemAt(1);$1_3.setText(String.format(LxnBase.BaseRes.export_Selection,$1_2));$1_3=($1_0.items).itemAt(2);$1_3.setText(String.format(LxnBase.BaseRes.export_ExceptSelection,$1_1-$1_2));})}).toDictionary())).toDictionary());$0.add(this.$7_2D);}var $1=(!$0.length)?0:$0.length-1;if(this.get_listConfig().Filterable){this.$7_31=new Ext.form.TextField(new Ext.form.TextFieldConfig().value(this.$7_27.GeneralFilter).enableKeyEvents(true).listeners({keydown:ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$p1_1.getKey();if($1_0===Ext.EventObject.ENTER){$p1_1.stopEvent();this.$7_17(true);}else if($1_0===Ext.EventObject.ESC){$p1_0.setValue(this.$7_27.GeneralFilter);}}),change:ss.Delegate.create(this,function(){
this.$7_17(true);})}).toDictionary());var $3=new Ext.BoxComponent(new Ext.BoxComponentConfig().autoEl({tag:'div'}).cls('filter').toDictionary());$0.addRange([$3,this.$7_31]);}if(this._args.mode===1){$0.add('->');this.$7_2F=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.select_Lower).handler(ss.Delegate.create(this,this.$7_11)).disabled(true).toDictionary());var $4=new Ext.Action(new Ext.ActionConfig().text(LxnBase.BaseRes.cancel_Lower).handler(ss.Delegate.create(this,function(){
if(this.$7_1!=null){this.$7_1();}})).toDictionary());$0.add(this.$7_2F);$0.add($4);}if(!$0.length){return null;}if(!this._args.mode&&$0.length!==$1){$0.insert($1,'->');}var $2=new Ext.Toolbar($0);$2.cls='autoGridToolbar';return $2;},$7_C:function(){var $0=new Ext.PagingToolbarConfig().pageSize(this.$7_27.limit).store(this.store).displayInfo(true).displayMsg(LxnBase.BaseRes.autoGrid_DispayMsg).emptyMsg(LxnBase.BaseRes.autoGrid_EmptyMsg);this.$7_32=new Ext.PagingToolbar($0.toDictionary());this.$7_32.on('change',ss.Delegate.create(this,function($p1_0,$p1_1){
this.$7_33=$p1_1['activePage'];this.$7_34=$p1_1['pages'];}));return this.$7_32;},create:function(type){if(ss.isNullOrUndefined(type)){type=this._args.type;}LxnBase.UI.FormsRegistry.editObject(type,null,null,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.Item;var $1_2=$1_0.RangeResponse;var $1_3=$1_1['__reference'];if(Type.canCast($1_3,Date)){$1_3=($1_3).format('dd.MM.yyyy');}var $1_4=LxnBase.BaseRes.created+' '+$1_3;if(ss.isNullOrUndefined($1_2.SelectedRow)){LxnBase.MessageRegister.info(this.get_listConfig().Caption,$1_4,LxnBase.BaseRes.autoGrid_NotDisplay_Msg);return;}LxnBase.MessageRegister.info(this.get_listConfig().Caption,$1_4);this.reloadWithData($1_2);}),null,this.$7_27);},edit:function(){var $0=this.get_selectionModel().getSelected();var $1=this.$7_22($0);LxnBase.Services.GenericService.CanUpdate($1,$0.id,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(!$1_0.IsEnabled){var $1_1=(ss.isNullOrUndefined($1_0.DisableInfo))?LxnBase.BaseRes.autoGrid_ActionNotPermitted_Msg:$1_0.DisableInfo;LxnBase.UI.MessageBoxWrap.show({title:LxnBase.BaseRes.error,msg:$1_1,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK});return;}LxnBase.UI.FormsRegistry.editObject($1,$0.id,null,ss.Delegate.create(this,function($p2_0){
var $2_0=$p2_0;var $2_1=$2_0.Item;var $2_2=$2_0.RangeResponse;var $2_3=$2_1['__reference'];if(Type.canCast($2_3,Date)){$2_3=($2_3).format('d.m.Y');}var $2_4=LxnBase.BaseRes.updated+' '+$2_3;if(ss.isNullOrUndefined($2_2.SelectedRow)){LxnBase.MessageRegister.info(this.get_listConfig().Caption,$2_4,LxnBase.BaseRes.autoGrid_NotDisplay_Msg);}else{LxnBase.MessageRegister.info(this.get_listConfig().Caption,$2_4);}this.reloadWithData($2_2);}),null,this.$7_27);}),null);},$7_D:function(){var $0=this.get_selectionModel().getSelected();var $1=this.$7_22($0);LxnBase.UI.FormsRegistry.editObject($1,$0.id,null,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.Item;var $1_2=$1_0.RangeResponse;var $1_3=$1_1['__reference'];if(Type.canCast($1_3,Date)){$1_3=($1_3).format('d.m.Y');}var $1_4=LxnBase.BaseRes.created+' '+$1_3;if(ss.isNullOrUndefined($1_2.SelectedRow)){LxnBase.MessageRegister.info(this.get_listConfig().Caption,$1_4,LxnBase.BaseRes.autoGrid_NotDisplay_Msg);return;}LxnBase.MessageRegister.info(this.get_listConfig().Caption,$1_4);this.reloadWithData($1_2);}),null,this.$7_27,1,true);},$7_E:function(){var $0=this.get_selectionModel().getSelected();if($0==null){return;}var $1=this.$7_22($0);if(LxnBase.UI.FormsRegistry.hasViewForm($1)){LxnBase.UI.FormsRegistry.viewObject($1,$0.id);}},$7_F:function(){var $0=this.get_selectionModel().getSelections();if($0==null||!$0.length){return;}var $1=new Array($0.length);for(var $2=0;$2<$0.length;$2++){$1[$2]=($0[$2]).id;}LxnBase.Services.GenericService.CanDelete(this._args.type,$1,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(!$1_0.IsEnabled){var $1_1=(ss.isNullOrUndefined($1_0.DisableInfo))?LxnBase.BaseRes.autoGrid_ActionNotPermitted_Msg:$1_0.DisableInfo;LxnBase.UI.MessageBoxWrap.show({title:LxnBase.BaseRes.error,msg:$1_1,icon:Ext.MessageBox.ERROR,buttons:Ext.MessageBox.OK});return;}LxnBase.UI.MessageBoxWrap.confirm(LxnBase.BaseRes.confirmation,LxnBase.StringUtility.getNumberText($0.length,LxnBase.BaseRes.autoGrid_DeleteMsg1,LxnBase.BaseRes.autoGrid_DeleteMsg2,LxnBase.BaseRes.autoGrid_DeleteMsg3),ss.Delegate.create(this,function($p2_0,$p2_1){
if($p2_0==='yes'){this.$7_12();}}));}),null);},$7_10:function($p0){var $0=new LxnBase.Data.DocumentExportArgs();$0.Mode=$p0;$0.Request=this.store.baseParams;if($p0===2||$p0===1){var $1=this.get_selectionModel().getSelections();var $2=[];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;$2.add($3.id);}$0.SelectedDocuments=$2;}LxnBase.UI.AutoControls.ReportLoader.load(String.format('export/{0}/Export_{1}.xls',this._args.type,Date.get_now().format('Y-m-d_H-i')),{exportParams:JSON.stringify($0)});},$7_11:function(){var $0=this.get_selectionModel().getSelections();var $1=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$1.add($2.id);}if(this.$7_0!=null){this.$7_0($1);}},$7_12:function(){var $0=this.get_selectionModel().getSelections();if($0==null){return;}var $1=new Array($0.length);for(var $2=0;$2<$0.length;$2++){$1[$2]=$0[$2].id;}LxnBase.Services.GenericService.Delete(this._args.type,$1,this.$7_27,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if($1_0.Success){this.$7_13($1_0.RangeResponse,$0);}else if($0.length===1){this.$7_14($0[0]);}else{this.$7_15($1_0.UndeletableObjects,$0);}}),null);},$7_13:function($p0,$p1){var $0=null;if($p1.length<=5){$0=this.$7_1F($p1,', ');}if(String.isNullOrEmpty($0)){LxnBase.MessageRegister.info(this.get_listConfig().Caption+': '+LxnBase.StringUtility.getNumberText($p1.length,LxnBase.BaseRes.autoGrid_DeleteCompletedMsg1,LxnBase.BaseRes.autoGrid_DeleteCompletedMsg2,LxnBase.BaseRes.autoGrid_DeleteCompletedMsg3));}else{LxnBase.MessageRegister.info(this.get_listConfig().Caption,LxnBase.BaseRes.deleted+' '+$0);}this.reloadWithData($p0);},$7_14:function($p0){var $0=this.$7_22($p0);LxnBase.Services.GenericService.CanReplace($0,$p0.id,ss.Delegate.create(this,function($p1_0){
if($p1_0){var $1_0=new LxnBase.UI.ReplaceForm($0,$p0.id);$1_0.add_saved(ss.Delegate.create(this,function(){
this.reload(false);}));$1_0.open();}else{LxnBase.UI.MessageBoxWrap.show(LxnBase.BaseRes.warning,LxnBase.BaseRes.autoGrid_DeleteConstrainedFailed_Msg+'<br/>'+LxnBase.BaseRes.autoGrid_ReplaceToAdmin_Msg,Ext.MessageBox.WARNING,Ext.MessageBox.OK);}}),null);},$7_15:function($p0,$p1){var $0='<br>';var $1=new ss.StringBuilder(LxnBase.BaseRes.autoGrid_DeleteFailed_Msg+$0+$0);$1.append("<div class='undeletable'>");for(var $2=0;$2<$p0.length;$2++){if($2===10){$1.append('<div>...</div>');break;}var $3=$p0[$2];$1.append(String.format('<div>{0}</div>',$3[LxnBase.Data.Reference.NamePos]));}$1.append('</div>');if($p0.length===$p1.length){LxnBase.UI.MessageBoxWrap.show(LxnBase.BaseRes.warning,$1.toString(),Ext.MessageBox.WARNING,Ext.MessageBox.OK);}else{$1.append($0);$1.append(LxnBase.BaseRes.autoGrid_ContinueDelete_Msg);LxnBase.UI.MessageBoxWrap.show(LxnBase.BaseRes.warning,$1.toString(),Ext.MessageBox.WARNING,Ext.MessageBox.YESNO,ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_0!=='yes'){return;}var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1_0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($p1);while($enum2.moveNext()){var $1_1=$enum2.current;if($1_0[LxnBase.Data.Reference.IdPos]===$1_1.id){this.get_selectionModel().deselectRow(this.store.indexOf($1_1));break;}}}this.$7_12();}));}},$7_16:function($p0){var $0=$p0.getChanges();var $1=$p0.modified;var $dict1=$1;for(var $key2 in $dict1){var $4={key:$key2,value:$dict1[$key2]};if(Type.canCast($0[$4.key],String)&&String.isNullOrEmpty($0[$4.key])){$0[$4.key]=null;}if($4.value===$0[$4.key]){delete $0[$4.key];}}if(!Object.getKeyCount($0)){$p0.reject(true);return;}var $2=this.$7_22($p0);var $3=$p0.get('Version');LxnBase.Services.GenericService.Update($2,$p0.id,$3,$0,this.$7_27,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=$1_0.Item;this.updateRecord($1_1,$p0);}),ss.Delegate.create(this,function($p1_0){
this.$7_1A($p1_0,$p0);}));},$7_17:function($p0){var $0=this.store.baseParams;var $1=this.$7_31.getValue();var $2=this.$7_18();if($0.GeneralFilter===$1&&$0.VisibleProperties.length===$2.length){var $3=true;var $enum1=ss.IEnumerator.getEnumerator($0.VisibleProperties);while($enum1.moveNext()){var $4=$enum1.current;if(!$2.contains($4)){$3=false;}}if($3){return false;}}$0.GeneralFilter=$1;$0.VisibleProperties=$2;if($p0){this.reload(true);}return true;},$7_18:function(){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(this._args.listConfig.Columns);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined(this.get_columnModel().getColumnById($1.Name))){continue;}var $2=this.get_columnModel().getColumnById($1.Name).hidden;if(ss.isUndefined($2)||!$2){$0.add($1.Name);}}return $0;},$7_19:function(){this.$7_27.NamedFilters=null;this.$7_27.GeneralFilter=null;this.$7_27.Filters=null;this.$7_31.setValue();this.$7_28.resetFilter();this.reload(true);},$7_1A:function($p0,$p1){$p0.set_handled(true);var $0=new Ext.Button(new Ext.ButtonConfig().text('OK').toDictionary());var $1=new Ext.form.Label(new Ext.form.LabelConfig().text($p0.get_error().Message).style('font-weight: bold').toDictionary());var $2=new Ext.form.Radio(new Ext.form.RadioConfig().boxLabel(LxnBase.BaseRes.autoGrid_RepeatUpdate).style('padding-top: 10px').checked_(true).name('updateOption').toDictionary());var $3=new Ext.form.Radio(new Ext.form.RadioConfig().boxLabel(LxnBase.BaseRes.autoGrid_RejectChanges).name('updateOption').toDictionary());var $4=new Ext.Window(new Ext.WindowConfig().width(350).modal(true).plain(true).baseCls('x-panel').bodyStyle('padding: 10px').resizable(false).title(LxnBase.BaseRes.error).items([$1,{items:[$2,$3],bodyStyle:'padding: 10px'}]).buttons([$0]).listeners({close:LxnBase.UI.EventsManager.unregisterKeyDownHandler}).buttonAlign('center').toDictionary());$0.on('click',ss.Delegate.create(this,function(){
if($2.checked){this.$7_16($p1);}else{this.store.rejectChanges();}$4.close();}));$4.show();LxnBase.UI.EventsManager.registerKeyDownHandler($4,false);},$7_1B:function($p0){var $0=this.get_selectionModel().getSelections().length;if(this.$7_2C!=null&&!this.get_listConfig().IsRemovingAllowed.IsDisabled){if(!$0){this.$7_2C.disable();}else{this.$7_2C.enable();}}if(this.$7_2A!=null&&!this.get_listConfig().IsEditAllowed.IsDisabled){if($0!==1){this.$7_2A.disable();}else{this.$7_2A.enable();}}if(this.$7_2B!=null&&!this.get_listConfig().IsCreationAllowed.IsDisabled){if($0!==1){this.$7_2B.disable();}else{this.$7_2B.enable();}}if(this.$7_2F!=null){if(!$0){this.$7_2F.disable();}else{this.$7_2F.enable();}}if(this.$7_2E!=null){if(!$0){this.$7_2E.disable();}else{this.$7_2E.enable();}}},$7_1C:function($p0,$p1,$p2){if(this.$7_30!=null){if(!String.isNullOrEmpty(this.$7_27.GeneralFilter)||(this.$7_27.Filters!=null&&this.$7_27.Filters.length>0)){this.$7_30.enable();var $1=(this.$7_30.getEl().child(this.$7_30.buttonSelector)).dom;$1.setAttribute(this.$7_30.tooltipType,this.$7_1D());}else{this.$7_30.disable();var $2=(this.$7_30.getEl().child(this.$7_30.buttonSelector)).dom;$2.setAttribute(this.$7_30.tooltipType,'');}}this.store.setDefaultSort(this.$7_27.sort,this.$7_27.dir);var $0=$p1;if(!ss.isNullOrUndefined($0.SelectedRow)){this.$7_35=$0.SelectedRow;}else{this.$7_35=-1;}this.$7_27.PositionableObjectId=null;},$7_1D:function(){var $0=new ss.StringBuilder();var $1='';if(!String.isNullOrEmpty(this.$7_27.GeneralFilter)){$0.append(String.format(LxnBase.BaseRes.filter_GeneralFilterMsg,this.$7_27.GeneralFilter));$1=' '+LxnBase.BaseRes.filter_Conjunction;}if(this.$7_27.Filters!=null&&this.$7_27.Filters.length>0){var $enum1=ss.IEnumerator.getEnumerator(this.$7_27.Filters);while($enum1.moveNext()){var $2=$enum1.current;var $3=this.tryGetColumnConfigByName($2.Property);if($3==null){continue;}var $enum2=ss.IEnumerator.getEnumerator($2.Conditions);while($enum2.moveNext()){var $4=$enum2.current;var $5=($4.Not)?' '+LxnBase.BaseRes.filter_Not:'';switch($4.Operator){case 2:$0.append(String.format("{0} '{1}'{2} {3}",$1,$3.Caption,$5,LxnBase.EnumUtility.localize(LxnBase.Data.FilterOperator,$4.Operator,LxnBase.BaseRes).toLowerCase()));break;case 1:case 3:case 4:case 5:case 6:case 7:case 9:case 8:$0.append(String.format("{0} '{1}'{2} {3} {4}",$1,$3.Caption,$5,LxnBase.EnumUtility.localize(LxnBase.Data.FilterOperator,$4.Operator,LxnBase.BaseRes).toLowerCase(),LxnBase.UI.AutoControls.AutoGrid.$7_1E($4.Value,$3)));break;case 10:var $6=(($4.Value).length===1)?LxnBase.EnumUtility.localize(LxnBase.Data.FilterOperator,1,LxnBase.BaseRes).toLowerCase():LxnBase.EnumUtility.localize(LxnBase.Data.FilterOperator,$4.Operator,LxnBase.BaseRes).toLowerCase();$0.append(String.format("{0} '{1}'{2} {3} {4}",$1,$3.Caption,$5,$6,LxnBase.UI.AutoControls.AutoGrid.$7_1E($4.Value,$3)));break;}}$1=' '+LxnBase.BaseRes.filter_Conjunction;}}if($0.isEmpty){return '';}return $0.toString();},$7_1F:function($p0,$p1){var $0=this.$7_20();if($0==null){return null;}var $1=new ss.StringBuilder();var $2='';var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $3=$enum1.current;var $4=$3.get($0);if(Type.canCast($4,Array)){$4=($4)[LxnBase.Data.Reference.NamePos];}if(Type.canCast($4,Date)){$4=($4).format('d.m.Y');}$1.append($2+$4);$2=$p1;}if($1.isEmpty){return null;}return $1.toString();},$7_20:function(){var $enum1=ss.IEnumerator.getEnumerator(this.get_listConfig().Columns);while($enum1.moveNext()){var $0=$enum1.current;if($0.IsReference){return $0.Name;}}return null;},$7_21:function(){var $0=this.get_selectionModel().getSelected();if(ss.isNullOrUndefined($0)){if(this.store.getCount()>0){this.get_selectionModel().selectRow(0);this.get_gridView().focusRow(0);}}else{this.get_gridView().focusRow(this.store.indexOf($0));}},$7_22:function($p0){var $0=$p0.data.__class;if(ss.isNullOrUndefined($0)){$0=this._args.type;}return $0;},$7_23:function($p0){var $0=this.$7_20();if($0==null){return null;}return $p0.get($0);},_args:null,$7_27:null,$7_28:null,$7_29:null,$7_2A:null,$7_2B:null,$7_2C:null,$7_2D:null,$7_2E:null,$7_2F:null,$7_30:null,$7_31:null,$7_32:null,$7_33:0,$7_34:0}
LxnBase.UI.AutoControls.AutoGridArgs=function(){this.mode=0;}
LxnBase.UI.AutoControls.AutoGridArgs.prototype={add_createActionToolbar:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_createActionToolbar:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,type:null,listConfig:null,nonPaged:false,baseRequest:null,forcedProperties:null,autoCommit:true,columnsConfig:null,onCreateActionToolbar:function(toolbarItems,autoGrid){if(this.$0!=null){this.$0(toolbarItems,autoGrid);}},setDefaultSort:function(column,dir){if(this.baseRequest.sort==null){this.baseRequest.sort=column;this.baseRequest.dir=dir;}}}
LxnBase.UI.AutoControls.AutoGridView=function(config){this._s=['CreatedOn','CreatedBy','ModifiedOn','ModifiedBy','Id'];LxnBase.UI.AutoControls.AutoGridView.initializeBase(this,[config]);}
LxnBase.UI.AutoControls.AutoGridView.prototype={beforeColMenuShow:function(){var $0=this.cm;var $1=this.colMenu;if(($1.items).length>0){return;}var $2=[];var $3=[];for(var $4=0;$4<this.$2_0.length;$4++){var $5=this.$2_0[$4];var $6=$0.findColumnIndex($5.dataIndex);var $7=new Ext.menu.CheckItem(new Ext.menu.CheckItemConfig().text($5.header).itemId('col-'+$5.id).hideOnClick(false).toDictionary());$7.setChecked(!$0.isHidden($6));if(this._s.contains($5.id)){$3.insert(this._s.indexOf($5.id),$7);}else{$2.add($7);}}$2.sort(function($p1_0,$p1_1){
return ($p1_0).text.compareTo(($p1_1).text);});$1.add($2);if($3.length>0){$1.add('-');$1.add($3);}},setColumns:function(columns){this.$2_0=columns;},getRowClass:function(record,index,rowParams,store){var $0=(ss.isValue((record.data).__deleted))?'deleted':'';var $1=this.getCustomRowClass(record);return ($0+' '+$1).trim();},getCustomRowClass:function(record){return null;},$2_0:null}
LxnBase.UI.AutoControls.ControlFactory=function(){}
LxnBase.UI.AutoControls.ControlFactory.createRenderer=function(columnConfig){if(columnConfig.Type===3){return LxnBase.UI.AutoControls.ControlFactory.$0;}if(columnConfig.Type===1){return LxnBase.UI.AutoControls.ControlFactory.getNumberRenderer(columnConfig,2);}if(columnConfig.Type===5){return LxnBase.UI.AutoControls.ControlFactory.$1(columnConfig);}if(columnConfig.Type===2){return LxnBase.UI.AutoControls.ControlFactory.$3(columnConfig);}if(!columnConfig.Type){return LxnBase.UI.AutoControls.ControlFactory.$2(columnConfig);}if(columnConfig.Type===6){var $0=columnConfig;return LxnBase.UI.AutoControls.ControlFactory.$4[$0.TypeName];}return null;}
LxnBase.UI.AutoControls.ControlFactory.createBooleanRenderer=function(){var $0=new LxnBase.Services.ColumnConfig();$0.Type=3;return LxnBase.UI.AutoControls.ControlFactory.createRenderer($0);}
LxnBase.UI.AutoControls.ControlFactory.createEditor=function(columnConfig,isListMode){var $0=null;switch(columnConfig.Type){case 1:var $2=columnConfig;var $3=new Ext.form.NumberFieldConfig().width(87).allowDecimals(!$2.IsInteger).decimalPrecision(2).allowBlank(!columnConfig.IsRequired).selectOnFocus(true);$0=($2.IsInteger)?new Ext.form.NumberField($3.toDictionary()):new LxnBase.UI.Controls.DecimalField($3.toDictionary());break;case 3:if(ss.isNullOrUndefined(isListMode)||!isListMode){$0=new Ext.form.Checkbox(new Ext.form.CheckboxConfig().toDictionary());}else{var $4=[false,LxnBase.BaseRes.filter_False];var $5=[true,LxnBase.BaseRes.filter_True];$0=new Ext.form.ComboBox(new Ext.form.ComboBoxConfig().store(new Ext.data.ArrayStore(new Ext.data.ArrayStoreConfig().fields(['Id','Name']).data([$4,$5]).toDictionary())).mode('local').width(50).displayField('Name').valueField('Id').editable(false).hideLabel(false).triggerAction('all').allowBlank(!columnConfig.IsRequired).pageSize(0).selectOnFocus(true).toDictionary());}break;case 4:var $6=new Ext.form.TextFieldConfig().selectOnFocus(true).allowBlank(!columnConfig.IsRequired);var $7=(columnConfig).Length;if($7>0){$6.maxLength($7);if(!(columnConfig).Lines){var $8=$7*6;if($8<70){$8=70;}else if($8>230){$8=230;}$6.width($8);}}else{$6.width(180);}if(!!(columnConfig).Lines){$6.width(230);$6.height(100);$0=new Ext.form.TextArea($6.toDictionary());}else{$0=new Ext.form.TextField($6.toDictionary());}break;case 5:var $9=new Ext.form.DateFieldConfig().allowBlank(!columnConfig.IsRequired).selectOnFocus(true);if(String.isNullOrEmpty((columnConfig).FormatString)){$9.format('d.m.Y');}else{$9.format((columnConfig).FormatString);}$0=new Ext.form.DateField($9.toDictionary());break;case 0:$0=LxnBase.UI.AutoControls.ControlFactory.getPersistentEditor(columnConfig).get_widget();break;case 2:$0=new Ext.form.ComboBox(new Ext.form.ComboBoxConfig().store(new Ext.data.ArrayStore(new Ext.data.ArrayStoreConfig().fields(['Id','Name']).data((columnConfig).Items).toDictionary())).mode('local').displayField('Name').valueField('Id').editable(false).hideLabel(false).hideTrigger(false).triggerAction('all').allowBlank(!columnConfig.IsRequired).pageSize(0).width(180).selectOnFocus(true).toDictionary());break;case 6:var $1=(columnConfig).TypeName;if(Object.keyExists(LxnBase.UI.AutoControls.ControlFactory.$5,$1)){var $A=LxnBase.UI.AutoControls.ControlFactory.$5[$1];$0=$A(columnConfig,isListMode);}break;}if($0==null){var $B=new Ext.form.TextFieldConfig().selectOnFocus(true);$0=new Ext.form.TextField($B.toDictionary());}$0.name=columnConfig.Name;$0.fieldLabel=columnConfig.Caption;if(!ss.isNullOrUndefined(columnConfig.DefaultValue)&&ss.isNullOrUndefined($0.value)){$0.setValue(columnConfig.DefaultValue);}return $0;}
LxnBase.UI.AutoControls.ControlFactory.createRefrenceRenderer=function(type){return function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
if($p1_0==null){return null;}var $1_0=new Array(3);$1_0[LxnBase.Data.Reference.IdPos]=$p1_2.id;$1_0[LxnBase.Data.Reference.NamePos]=$p1_0;var $1_1=$p1_2.data.__class;$1_0[LxnBase.Data.Reference.TypePos]=(ss.isNullOrUndefined($1_1))?type:$1_1;return LxnBase.UI.Controls.ObjectLink.renderArray($1_0);};}
LxnBase.UI.AutoControls.ControlFactory.getPersistentEditor=function(cfg){var $0=180;if(!!cfg.Length){$0=cfg.Length*6;if($0<70){$0=70;}else if($0>230){$0=230;}}var $1=new LxnBase.UI.Controls.ObjectSelectorConfig().setClass(cfg.Clazz).hideLabel(false).width($0).selectOnFocus(true).allowBlank(!cfg.IsRequired).name(cfg.Name).fieldLabel(cfg.Caption);return new LxnBase.UI.Controls.ObjectSelector($1);}
LxnBase.UI.AutoControls.ControlFactory.registerCustomRenderer=function(typeName,renderer){LxnBase.UI.AutoControls.ControlFactory.$4[typeName]=renderer;}
LxnBase.UI.AutoControls.ControlFactory.registerCustomEditor=function(typeName,editor){LxnBase.UI.AutoControls.ControlFactory.$5[typeName]=editor;}
LxnBase.UI.AutoControls.ControlFactory.$0=function($p0){if($p0){return "<div class='checkBoxDisabled checked'></div>";}return '';}
LxnBase.UI.AutoControls.ControlFactory.$1=function($p0){return function($p1_0){
return Ext.util.Format.date($p1_0,$p0.FormatString);};}
LxnBase.UI.AutoControls.ControlFactory.$2=function($p0){return function($p1_0){
if($p1_0==null){return null;}var $1_0=Type.safeCast($p1_0,Array);if($1_0!=null){if($p0.RenderAsString){return $1_0[LxnBase.Data.Reference.NamePos];}if(ss.isNullOrUndefined($1_0[LxnBase.Data.Reference.TypePos])){$1_0[LxnBase.Data.Reference.TypePos]=$p0.Clazz;}return LxnBase.UI.Controls.ObjectLink.renderArray($1_0);}var $1_1=$p1_0;if($p0.RenderAsString){return $1_1.Name;}if(ss.isNullOrUndefined($1_1.Type)){$1_1.Type=$p0.Clazz;}return LxnBase.UI.Controls.ObjectLink.renderInfo($1_1);};}
LxnBase.UI.AutoControls.ControlFactory.$3=function($p0){return function($p1_0){
if(ss.isNullOrUndefined($p1_0)){return null;}if(Type.canCast($p1_0,Array)){return ($p1_0)[LxnBase.Data.Reference.NamePos];}for(var $1_0=0;$1_0<$p0.Items.length;$1_0++){var $1_1=$p0.Items[$1_0];if(!ss.isNullOrUndefined($1_1[LxnBase.Data.Reference.IdPos])&&$1_1[LxnBase.Data.Reference.IdPos]===$p1_0){return $1_1[LxnBase.Data.Reference.NamePos];}}return $p1_0;};}
LxnBase.UI.AutoControls.ControlFactory.getNumberRenderer=function(config,precision){return function($p1_0){
if(ss.isNullOrUndefined($p1_0)){return '';}if(!ss.isValue(precision)){precision=0;}var $1_0=(config.IsInteger)?$p1_0.toString():($p1_0).format('N'+precision);return String.format("<div style='text-align: right'>{0}</div>",$1_0);};}
LxnBase.UI.AutoControls.GridFilterConfig=function(){}
LxnBase.UI.AutoControls.GridFilterConfig.prototype={setCaption:function(caption){this.$0=caption;return this;},setFilter:function(filter){this.$1=filter;return this;},setDataPath:function(dataPath){this.$2=dataPath;return this;},get_caption:function(){return this.$0;},set_caption:function(value){this.$0=value;return value;},get_filter:function(){return this.$1;},set_filter:function(value){this.$1=value;return value;},get_internalPath:function(){return this.$2;},set_internalPath:function(value){this.$2=value;return value;},$0:null,$1:null,$2:null}
LxnBase.UI.AutoControls.GridFilterPlugin=function(grid){this.$11={};this.$F=grid;}
LxnBase.UI.AutoControls.GridFilterPlugin.registerCustomFilters=function(typeName,configs){LxnBase.UI.AutoControls.GridFilterPlugin.$10[typeName]=configs;}
LxnBase.UI.AutoControls.GridFilterPlugin.$4=function($p0){var $0=$p0.Type;if($0===3){return new LxnBase.UI.Controls.ColumnFilters.BooleanFilter();}if($0===4){return new LxnBase.UI.Controls.ColumnFilters.StringFilter();}if($0===1){return new LxnBase.UI.Controls.ColumnFilters.NumberFilter();}if($0===5){return new LxnBase.UI.Controls.ColumnFilters.DateFilter();}if(!$0){var $1=new LxnBase.Services.ColumnConfig();$1.Type=($p0).FilterType;return LxnBase.UI.AutoControls.GridFilterPlugin.$4($1);}if($0===2){return new LxnBase.UI.Controls.ColumnFilters.ListFilter();}return null;}
LxnBase.UI.AutoControls.GridFilterPlugin.$B=function($p0,$p1,$p2){if($p0==null){return null;}for(var $0=0;$0<$p0.length;$0++){if($p0[$0].Property===$p1&&LxnBase.UI.AutoControls.GridFilterPlugin.$E($p0[$0].InternalPath,$p2)){return $p0[$0];}}return null;}
LxnBase.UI.AutoControls.GridFilterPlugin.$C=function($p0,$p1,$p2){if($p0.Filters==null){return;}var $0=[];for(var $1=0;$1<$p0.Filters.length;$1++){if($p0.Filters[$1].Property!==$p1||!LxnBase.UI.AutoControls.GridFilterPlugin.$E($p0.Filters[$1].InternalPath,$p2)){$0[$0.length]=$p0.Filters[$1];}}$p0.Filters=$0;}
LxnBase.UI.AutoControls.GridFilterPlugin.$E=function($p0,$p1){if(String.isNullOrEmpty($p0)&&String.isNullOrEmpty($p1)){return true;}if($p0===$p1){return true;}return false;}
LxnBase.UI.AutoControls.GridFilterPlugin.prototype={init:function(component){component.on('render',ss.Delegate.create(this,this.$1));},resetFilter:function(){var $dict1=this.$11;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=($0.value);for(var $2=0;$2<$1.length;$2++){($1[$2]).setChecked(false,true);}}},get_$0:function(){return this.$F.get_gridView();},$1:function($p0){this.$2();this.get_$0().hmenu.on('beforeshow',ss.Delegate.create(this,function(){
LxnBase.UI.EventsManager.registerKeyDownHandler(this.get_$0().hmenu,false);this.$6();}));this.get_$0().hmenu.on('beforehide',LxnBase.UI.EventsManager.unregisterKeyDownHandler);this.get_$0().cm.on('columnmoved',ss.Delegate.create(this,function(){
this.$5();}));this.$F.store.on('load',ss.Delegate.create(this,function(){
this.resetFilter();this.$5();}));},$2:function(){this.get_$0().hmenu.addSeparator();for(var $0=0;$0<this.$F.get_listConfig().Columns.length;$0++){var $1=this.$F.get_listConfig().Columns[$0];var $2=this.$3($1);for(var $3=0;$3<$2.length;$3++){this.get_$0().hmenu.add($2[$3]);}this.$11[$1.Name]=$2;}},$3:function($p0){var $0=$p0.Type;if($0!==6){var $2=LxnBase.UI.AutoControls.GridFilterPlugin.$4($p0);if($2==null){return null;}$2.set_columnConfig($p0);$2.add_changed(ss.Delegate.create(this,this.$8));return [new Ext.menu.CheckItem({text:LxnBase.BaseRes.filter_Title,hideOnClick:false,menu:$2.getFilterMenu(),hidden:true,filter:$2,listeners:{checkchange:ss.Delegate.create(this,this.$9)}})];}var $1=$p0;if(!ss.isNullOrUndefined($1.TypeName)){var $3=[];var $4=LxnBase.UI.AutoControls.GridFilterPlugin.$10[$1.TypeName];if($4==null){return $3;}for(var $5=0;$5<$4.length;$5++){var $6=$4[$5].get_filter().create();$6.set_columnConfig($p0);$6.set_internalPath($4[$5].get_internalPath());$6.add_changed(ss.Delegate.create(this,this.$8));$3.add(new Ext.menu.CheckItem({text:$4[$5].get_caption(),hideOnClick:false,menu:$6.getFilterMenu(),filter:$6,listeners:{checkchange:ss.Delegate.create(this,this.$9)}}));}return $3;}return null;},$5:function(){var $0=this.$F.store.baseParams;for(var $1=0;$1<this.$F.get_listConfig().Columns.length;$1++){var $2=this.$F.get_listConfig().Columns[$1].Name;var $3=this.$F.get_columnModel().findColumnIndex($2);if($3>=0){var $4=this.$11[$2];var $5=false;for(var $6=0;$6<$4.length;$6++){var $7=$4[$6].filter;if(LxnBase.UI.AutoControls.GridFilterPlugin.$B($0.Filters,$2,$7.get_internalPath())!=null){this.$7($2,$4[$6]);$5=true;break;}}this.$D(parseInt($3),$5);}}},$6:function(){var $0=this.$F.getColumnConfig(this.get_$0().hdCtxIndex);var $dict1=this.$11;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};for(var $3=0;$3<($2.value).length;$3++){($2.value)[$3].hide();}}if(ss.isNullOrUndefined(this.$11[$0.Name])){return;}var $1=this.$11[$0.Name];for(var $4=0;$4<$1.length;$4++){$1[$4].show();}},$7:function($p0,$p1){var $0=$p1.filter;var $1=LxnBase.UI.AutoControls.GridFilterPlugin.$B((this.$F.store.baseParams).Filters,$p0,$0.get_internalPath());if($1==null||$1.Conditions==null||!$1.Conditions.length){return;}$0.set_conditions($1.Conditions);($p1).setChecked(true,true);},$8:function($p0,$p1){var $0=$p0;var $1=this.$11[$0.get_columnConfig().Name];for(var $2=0;$2<$1.length;$2++){if($1[$2].filter===$0){($1[$2]).setChecked($0.get_conditions()!=null,true);this.$9($1[$2],$0.get_conditions()!=null);break;}}},$9:function($p0,$p1){var $0=$p0.filter;if($p1&&$0.get_conditions()!=null){this.$A($0);this.$D(this.get_$0().hdCtxIndex,true);this.$F.reload(true);}else{var $1=this.$F.store.baseParams;var $2=LxnBase.UI.AutoControls.GridFilterPlugin.$B($1.Filters,$0.get_columnConfig().Name,$0.get_internalPath());if($2!=null){LxnBase.UI.AutoControls.GridFilterPlugin.$C($1,$0.get_columnConfig().Name,$0.get_internalPath());this.$D(this.get_$0().hdCtxIndex,false);this.$F.reload(true);}}},$A:function($p0){var $0=this.$F.store.baseParams;var $1=$0.Filters;var $2=LxnBase.UI.AutoControls.GridFilterPlugin.$B($1,$p0.get_columnConfig().Name,$p0.get_internalPath());if($2==null){$2=new LxnBase.Data.PropertyFilter();$2.Property=$p0.get_columnConfig().Name;$2.InternalPath=$p0.get_internalPath();if($1==null){$0.Filters=[$2];}else{$1[$1.length]=$2;}}$2.Conditions=$p0.get_conditions();},$D:function($p0,$p1){var $0='filterCls';var $1=this.get_$0().mainHd.select('td');var $2=$1.item($p0);if($p1){$2.addClass($0);}else{$2.removeClass($0);}},$F:null}
LxnBase.UI.AutoControls.RecordMeta=function(){LxnBase.UI.AutoControls.RecordMeta.initializeBase(this);}
LxnBase.UI.AutoControls.RecordMeta.prototype={__deleted:false}
LxnBase.UI.AutoControls.ReportLoader=function(){}
LxnBase.UI.AutoControls.ReportLoader.get_instance=function(){return LxnBase.UI.AutoControls.ReportLoader.$0;}
LxnBase.UI.AutoControls.ReportLoader.set_instance=function(value){LxnBase.UI.AutoControls.ReportLoader.$0=value;return value;}
LxnBase.UI.AutoControls.ReportLoader.load=function(url,parameters){LxnBase.UI.AutoControls.ReportLoader.get_instance().loadReport(url,parameters);}
Type.registerNamespace('LxnBase.UI.AutoForms');LxnBase.UI.AutoForms.AutoEditForm=function(args,itemConfig){LxnBase.UI.AutoForms.AutoEditForm.initializeBase(this,[args,itemConfig]);}
LxnBase.UI.AutoForms.AutoEditForm.prototype={loadInstance:function(onLoaded){LxnBase.Services.GenericService.Get(this.get_args().type,this.get_args().idToLoad,false,onLoaded,null);},onLoadForm:function(){this.get_window().setWidth(this.$1E(this.get_fields()));},onLoaded:function(){if(this.get_instance()!=null){this.$1F=this.get_instance();}},addFields:function(){var $0=new Array(this.get_instanceConfig().Columns.length);for(var $1=0;$1<this.get_instanceConfig().Columns.length;$1++){$0[$1]=LxnBase.UI.AutoControls.ControlFactory.createEditor(this.get_instanceConfig().Columns[$1]);this.get_form().add($0[$1]);}return $0;},setFieldValues:function(){var $0=this.get_instanceConfig().Columns;for(var $1=0;$1<$0.length;$1++){var $2=this.getInstancePropertyValue($0[$1].Name);if(!ss.isNullOrUndefined($2)){this.get_fields()[$1].setValue($2);}}},onSave:function(){var $0=this.getFieldValues();var $1=(this.get_instance()!=null)?this.$1F['Version']:null;if(this.get_localMode()){$0['Id']=this.get_args().get_id();this.completeSave(LxnBase.Data.ItemResponse.create($0));}else if(!!Object.getKeyCount($0)){LxnBase.Services.GenericService.Update(this.get_args().type,this.get_args().get_id(),$1,$0,this.get_args().rangeRequest,ss.Delegate.create(this,this.completeSave),null);}else{this.cancel();}},onSaved:function(result){var $0=result;if(!this.get_localMode()&&ss.isNullOrUndefined(this.get_args().rangeRequest)){var $1=$0.Item.__reference||this.get_instanceConfig().Caption;LxnBase.MessageRegister.info(this.get_instanceConfig().ListCaption,((this.get_args().get_isNew())?LxnBase.BaseRes.created:LxnBase.BaseRes.updated)+' '+$1);}LxnBase.UI.AutoForms.AutoEditForm.callBaseMethod(this, 'onSaved',[result]);},getFieldValues:function(){var $0={};for(var $1=0;$1<this.get_fields().length;$1++){this.getFieldValue(this.get_fields()[$1],$0);}return $0;},getFieldValue:function(field,values){var $0=field.getValue();if(!ss.isValue($0)||String.isNullOrEmpty($0.toString())&&$0!==0){$0=null;}if(this.$1F==null||this.get_localMode()||field.isDirty()&&this.$1F[field.name]!==$0){values[field.name]=$0;}},$1E:function($p0){var $0=0;for(var $1=0;$1<$p0.length;$1++){if(!!$p0[$1].width&&$0<$p0[$1].width){$0=$p0[$1].width;}}return this.get_form().labelWidth+$0+50;},$1F:null}
LxnBase.UI.AutoForms.AutoFormCallbacks=function(){}
LxnBase.UI.AutoForms.AutoFormCallbacks.registerAsDefaults=function(){LxnBase.UI.FormsRegistry.registerDefaultList(LxnBase.UI.AutoForms.AutoFormCallbacks.listObjects);LxnBase.UI.FormsRegistry.registerDefaultView(LxnBase.UI.AutoForms.AutoFormCallbacks.viewObject);LxnBase.UI.FormsRegistry.registerDefaultEdit(LxnBase.UI.AutoForms.AutoFormCallbacks.editObject);LxnBase.UI.FormsRegistry.registerDefaultSelect(LxnBase.UI.AutoForms.AutoFormCallbacks.selectObjects);}
LxnBase.UI.AutoForms.AutoFormCallbacks.listObjects=function(args,newTab){LxnBase.UI.Tabs.open(newTab,args.type,function($p1_0){
return new LxnBase.UI.AutoForms.AutoListTab($p1_0,args);},args.baseRequest);}
LxnBase.UI.AutoForms.AutoFormCallbacks.viewObject=function(type,id,newTab){LxnBase.UI.Tabs.open(newTab,id,function($p1_0){
return new LxnBase.UI.AutoForms.AutoViewForm($p1_0,id,type);});}
LxnBase.UI.AutoForms.AutoFormCallbacks.editObject=function(args){LxnBase.Data.ConfigManager.getEditConfig(args.type,function($p1_0){
var $1_0=new LxnBase.UI.AutoForms.AutoEditForm(args,$p1_0);$1_0.open();});}
LxnBase.UI.AutoForms.AutoFormCallbacks.selectObjects=function(args){LxnBase.Data.ConfigManager.getListConfig(args.type,function($p1_0){
var $1_0=new LxnBase.UI.AutoForms.AutoSelectForm(args,$p1_0);$1_0.open();});}
LxnBase.UI.AutoForms.AutoListTab=function(tabId,args){LxnBase.UI.AutoForms.AutoListTab.initializeBase(this,[new Ext.PanelConfig().closable(true).autoScroll(true).layout('fit').title(LxnBase.BaseRes.loading).toDictionary(),tabId]);if(args==null){throw new Error('Args cannot be null');}this.$5_3=args;LxnBase.Data.ConfigManager.getListConfig(this.$5_3.type,ss.Delegate.create(this,this.$5_1));}
LxnBase.UI.AutoForms.AutoListTab.prototype={get_listArgs:function(){return this.$5_3;},get_autoGrid:function(){return this.$5_4;},get_selectedRecords:function(){return this.$5_4.get_selectionModel().getSelections();},beforeActivate:function(pparams){this.$5_5=ss.isNullOrUndefined(pparams);if(this.$5_5){return;}this.$5_4.reloadGrid(pparams);},onActivate:function(isFirst){if(!isFirst&&this.$5_5){this.$5_4.refresh();}},handleKeyEvent:function(keyEvent){return this.$5_4.handleKeyEvent(keyEvent);},$5_1:function($p0){this.setTitle((String.isNullOrEmpty($p0.Caption))?this.$5_3.type:$p0.Caption);this.add(this.$5_2($p0));this.onLoad();this.doLayout();},$5_2:function($p0){var $0=new LxnBase.UI.AutoControls.AutoGridArgs();$0.type=this.$5_3.type;$0.listConfig=$p0;$0.baseRequest=this.$5_3.baseRequest;var $1=new Ext.grid.EditorGridPanelConfig();this.onInitGrid($0,$1);this.$5_4=new LxnBase.UI.AutoControls.AutoGrid($0,$1);return this.$5_4;},onInitGrid:function(config,editorGridPanelConfig){},onLoad:function(){},$5_3:null,$5_4:null,$5_5:true}
LxnBase.UI.AutoForms.AutoSelectForm=function(args,config){this.$2=args;this.$3=config;this.$3.SingleSelect=this.$2.singleSelect;}
LxnBase.UI.AutoForms.AutoSelectForm.prototype={get_width:function(){return this.$6;},set_width:function(value){this.$6=value;return value;},get_height:function(){return this.$7;},set_height:function(value){this.$7=value;return value;},get_listConfig:function(){return this.$3;},open:function(){this.$0();this.$4=new Ext.Window(new Ext.WindowConfig().title(this.$3.Caption||this.$2.type).items(this.$5).layout('fit').width(this.$6).height(this.$7).listeners({close:ss.Delegate.create(this,this.$1)}).modal(true).toDictionary());this.$5.add_onSelect(ss.Delegate.create(this,function($p1_0){
if(this.$2.onSelect!=null){this.$2.onSelect($p1_0);}this.$8=true;this.$4.close();}));this.$5.add_onCancelSelect(ss.Delegate.create(this.$4,this.$4.close));LxnBase.UI.EventsManager.registerKeyDownHandler(this,false);this.$4.show();},$0:function(){var $0=new LxnBase.UI.AutoControls.AutoGridArgs();$0.type=this.$2.type;$0.listConfig=this.$3;$0.baseRequest=this.$2.baseRequest;$0.mode=1;var $1=new Ext.grid.EditorGridPanelConfig();this.onInitGrid($0,$1);this.$5=new LxnBase.UI.AutoControls.AutoGrid($0,$1);},onInitGrid:function(config,editorGridPanelConfig){},$1:function(){if(!this.$8&&this.$2.onCancel!=null){this.$2.onCancel();}LxnBase.UI.EventsManager.unregisterKeyDownHandler(this);},handleKeyEvent:function(keyEvent){return this.$5.handleKeyEvent(keyEvent);},restoreFocus:function(){},$2:null,$3:null,$4:null,$5:null,$6:700,$7:400,$8:false}
LxnBase.UI.AutoForms.AutoViewForm=function(tabId,id,type){LxnBase.UI.AutoForms.AutoViewForm.initializeBase(this,[tabId,id,type]);}
LxnBase.UI.AutoForms.AutoViewForm.prototype={getInstance:function(){LxnBase.Services.GenericService.Get(this.get_instanceType(),this.get_id(),true,ss.Delegate.create(this,this.load),ss.Delegate.create(this,this.$5_A));},onLoad:function(){var $0=this.get_itemConfig().Columns;var $1=null;var $2=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;var $4=this.get_instance()[$3.Name];if($3.IsReference){if(Type.canCast($4,String)){$1=$4;}else if(Type.canCast($4,Array)){$1=($4)[LxnBase.Data.Reference.NamePos];}}if(ss.isNullOrUndefined($4)||$3.Hidden||$3.Type===3&&!$4){continue;}var $5=LxnBase.UI.AutoControls.ControlFactory.createRenderer($3);var $6=(($5==null)?$4:$5($4));$6=$6.split('\n').join('<br/>');$2.append("<div class='viewItem'>");$2.append(String.format("<div class='itemCaption'>{0}</div>",($3.Caption||$3.Name)+':'));$2.append(String.format("<div class='itemValue'>{0}</div>",$6));$2.append('</div>');}if($1==null){$1=this.get_itemConfig().Caption||this._type;}this.setTitle($1);new Ext.Template($2.toString()).overwrite(this.body,this.get_instance());this.doLayout();},$5_A:function($p0){this.close();}}
Type.registerNamespace('LxnBase.UI.Controls.ColumnFilters');LxnBase.UI.Controls.ColumnFilters.BaseFilter=function(){}
LxnBase.UI.Controls.ColumnFilters.BaseFilter.prototype={add_changed:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_changed:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,get_columnConfig:function(){return this.$1;},set_columnConfig:function(value){this.$1=value;return value;},get_internalPath:function(){return this.$2;},set_internalPath:function(value){this.$2=value;return value;},invokeChanged:function(){if(this.$0!=null){this.$0(this,ss.EventArgs.Empty);}},$1:null,$2:null}
LxnBase.UI.Controls.ColumnFilters.BooleanFilter=function(){LxnBase.UI.Controls.ColumnFilters.BooleanFilter.initializeBase(this);}
LxnBase.UI.Controls.ColumnFilters.BooleanFilter.prototype={create:function(){return new LxnBase.UI.Controls.ColumnFilters.BooleanFilter();},get_conditions:function(){var $0=new LxnBase.Data.PropertyFilterCondition();$0.Operator=1;$0.Value=this.$4;return [$0];},set_conditions:function(value){if(value!=null&&value[0].Value){this.$4=true;this.$6=true;this.$5[0].setChecked(true,true);}else{this.$4=false;this.$6=true;this.$5[1].setChecked(true,true);}return value;},getFilterMenu:function(){var $0=Ext.id();this.$5=[new Ext.menu.CheckItem(new Ext.menu.CheckItemConfig().text(LxnBase.BaseRes.filter_True).group($0).checked_(this.$4).listeners({checkchange:ss.Delegate.create(this,function(){
this.$3(true);})}).toDictionary()),new Ext.menu.CheckItem(new Ext.menu.CheckItemConfig().text(LxnBase.BaseRes.filter_False).group($0).checked_(!this.$4).listeners({checkchange:ss.Delegate.create(this,function(){
this.$3(false);})}).toDictionary())];return new Ext.menu.Menu(new Ext.menu.MenuConfig().cls('filterMenu').items(this.$5).toDictionary());},$3:function($p0){if(this.$6){this.$6=false;return;}if($p0===this.$4){return;}this.$4=$p0;this.invokeChanged();},$4:false,$5:null,$6:false}
LxnBase.UI.Controls.ColumnFilters.DateFilter=function(){LxnBase.UI.Controls.ColumnFilters.DateFilter.initializeBase(this);}
LxnBase.UI.Controls.ColumnFilters.DateFilter.$3=function($p0,$p1){if(!ss.isNull($p1)){$p0.picker.setValue($p1);}}
LxnBase.UI.Controls.ColumnFilters.DateFilter.prototype={create:function(){return new LxnBase.UI.Controls.ColumnFilters.DateFilter();},get_conditions:function(){if(this.$14!=null){var $1=new LxnBase.Data.PropertyFilterCondition();$1.Value=this.$14;$1.Operator=1;return [$1];}if(this.$12==null&&this.$13==null){return null;}var $0=[];if(this.$13!=null){var $2=new LxnBase.Data.PropertyFilterCondition();$2.Value=this.$13;$2.Operator=7;$0.add($2);}if(this.$12!=null){var $3=new LxnBase.Data.PropertyFilterCondition();$3.Value=this.$12;$3.Operator=8;$0.add($3);}return $0;},set_conditions:function(value){if(value==null||!value.length){return;}for(var $0=0;$0<value.length;$0++){if(value[$0].Operator===8||value[$0].Operator===9){this.$12=value[$0].Value;this.$C.setChecked(true,true);this.$F.picker.setValue(this.$12);}else if(value[$0].Operator===7||value[$0].Operator===6){this.$13=value[$0].Value;this.$D.setChecked(true,true);this.$10.picker.setValue(this.$13);}else if(value[$0].Operator===1){this.$14=value[$0].Value;this.$E.setChecked(true,true);this.$11.picker.setValue(this.$14);}else{throw new Error('Argument error');}}return value;},getFilterMenu:function(){this.$10=new Ext.menu.DateMenu();this.$10.on('select',ss.Delegate.create(this,this.$4));LxnBase.UI.Controls.ColumnFilters.DateFilter.$3(this.$10,this.$13);this.$D=new Ext.menu.CheckItem({text:LxnBase.BaseRes.filter_BeforeDate,hideOnClick:false,checked:this.$13!=null,menu:this.$10});this.$D.on('checkchange',ss.Delegate.create(this,this.$7));this.$F=new Ext.menu.DateMenu();this.$F.on('select',ss.Delegate.create(this,this.$5));LxnBase.UI.Controls.ColumnFilters.DateFilter.$3(this.$F,this.$12);this.$C=new Ext.menu.CheckItem({text:LxnBase.BaseRes.filter_AfterDate,hideOnClick:false,checked:this.$12!=null,menu:this.$F});this.$C.on('checkchange',ss.Delegate.create(this,this.$8));this.$11=new Ext.menu.DateMenu();this.$11.on('select',ss.Delegate.create(this,this.$6));LxnBase.UI.Controls.ColumnFilters.DateFilter.$3(this.$11,this.$14);this.$E=new Ext.menu.CheckItem({text:LxnBase.BaseRes.filter_OnDate,hideOnClick:false,checked:this.$14!=null,menu:this.$11});this.$E.on('checkchange',ss.Delegate.create(this,this.$9));this.$B=new Ext.menu.Menu({items:[this.$C,this.$D,'-',this.$E]});return this.$B;},$4:function($p0,$p1){this.$13=$p1;this.$D.setChecked(true,true);this.$A();this.invokeChanged();},$5:function($p0,$p1){this.$12=$p1;this.$C.setChecked(true,true);this.$A();this.invokeChanged();},$6:function($p0,$p1){this.$14=$p1;this.$E.setChecked(true,true);this.$12=null;this.$C.setChecked(false,true);this.$13=null;this.$D.setChecked(false,true);this.invokeChanged();},$7:function($p0,$p1){if($p1){$p0.setChecked(false,true);}else{this.$D=null;this.invokeChanged();}},$8:function($p0,$p1){if($p1){$p0.setChecked(false,true);}else{this.$12=null;this.invokeChanged();}},$9:function($p0,$p1){if($p1){$p0.setChecked(false,true);}else{this.$14=null;this.invokeChanged();}},$A:function(){this.$14=null;this.$E.setChecked(false,true);},$B:null,$C:null,$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null}
LxnBase.UI.Controls.ColumnFilters.EditorFilter=function(){LxnBase.UI.Controls.ColumnFilters.EditorFilter.initializeBase(this);this.$4=LxnBase.UI.Controls.ColumnFilters.EditorFilter._defaultOperator;}
LxnBase.UI.Controls.ColumnFilters.EditorFilter.prototype={get_not:function(){return this.$3;},set_not:function(value){this.$3=value;return value;},get_operator:function(){return this.$4;},set_operator:function(value){this.$4=value;return value;},get_value:function(){return this.$5;},set_value:function(value){this.$5=value;return value;},get_conditions:function(){if(this.get_operator()!==2&&this.$5==null){return null;}var $0=new LxnBase.Data.PropertyFilterCondition();$0.Not=this.$3;$0.Operator=this.get_operator();$0.Value=this.$5;return [$0];},set_conditions:function(value){if(value==null||!value.length){this.$3=false;this.$5=null;this.set_operator(LxnBase.UI.Controls.ColumnFilters.EditorFilter._defaultOperator);}else{this.$3=value[0].Not;this.$5=value[0].Value;this.set_operator(value[0].Operator);this.get_notItem().setChecked(this.$3,true);for(var $0=0;$0<this.get_checkItems().length;$0++){if(this.get_checkItems()[$0].initialConfig.value===this.get_operator()){this.get_checkItems()[$0].setChecked(true,true);break;}}this.get_editor().setValue(this.get_value());}return value;},createCheckItem:function(groupId,filterOperator,listeners){var $0=new Ext.menu.CheckItem({text:LxnBase.EnumUtility.localize(LxnBase.Data.FilterOperator,filterOperator,LxnBase.BaseRes),value:filterOperator,group:groupId,checked:this.get_operator()===filterOperator,hideOnClick:false,listeners:listeners});return $0;},checkItemClicked:function(checkItem,cchecked){if(!cchecked){return;}this.set_operator(checkItem.initialConfig.value);this.checkEditor();this.invokeChanged();},checkEditor:function(){if(this.get_operator()===2){this.get_editor().disable();}else{this.get_editor().enable();}},$3:false,$4:0,$5:null}
LxnBase.UI.Controls.ColumnFilters.ListFilter=function(){this.$6=[];LxnBase.UI.Controls.ColumnFilters.ListFilter.initializeBase(this);}
LxnBase.UI.Controls.ColumnFilters.ListFilter.prototype={create:function(){return new LxnBase.UI.Controls.ColumnFilters.ListFilter();},get_conditions:function(){if(this.$6==null||!this.$6.length){return null;}var $0=new LxnBase.Data.PropertyFilterCondition();var $1=[];var $2=this.$6;for(var $3=0;$3<$2.length;$3++){$1[$3]=$2[$3];}$0.Not=this.$5;$0.Value=$1;$0.Operator=10;return [$0];},set_conditions:function(value){if(value==null||!value.length){this.$5=false;this.$6=[];}else{this.$5=value[0].Not;this.$6=[];var $0=value[0].Value;for(var $1=0;$1<$0.length;$1++){this.$6[$1]=$0[$1];}this.$7.setChecked(this.$5,true);for(var $2=0;$2<this.$8.length;$2++){var $3=this.$8[$2];for(var $4=0;$4<this.$6.length;$4++){if($3.initialConfig.checkItemId===this.$6[$4]){$3.setChecked(true,true);break;}}}}return value;},getFilterMenu:function(){this.$7=new Ext.menu.CheckItem(new Ext.menu.CheckItemConfig().text(LxnBase.BaseRes.propertyFilterCondition_Not).checked_(this.$5).listeners({checkchange:ss.Delegate.create(this,function($p1_0,$p1_1){
this.$5=$p1_1;this.invokeChanged();})}).hideOnClick(false).toDictionary());this.$8=[];var $0=this.get_columnConfig();for(var $2=0;$2<$0.Items.length;$2++){var $3=$0.Items[$2];this.$8.add(new Ext.menu.CheckItem(new Ext.menu.CheckItemConfig().text($3[LxnBase.Data.Reference.NamePos]).checked_(this.$4($3[LxnBase.Data.Reference.IdPos])).listeners({checkchange:ss.Delegate.create(this,this.$3)}).hideOnClick(false).custom('checkItemId',$3[LxnBase.Data.Reference.IdPos]).toDictionary()));}var $1=[];$1.add(this.$7);$1.add(new Ext.menu.Separator());$1.addRange(this.$8);return new Ext.menu.Menu({items:$1});},$3:function($p0,$p1){var $0=$p0.initialConfig.checkItemId;if(!$p1){for(var $1=0;$1<this.$6.length;$1++){if(this.$6[$1]===$0){this.$6.removeAt($1);break;}}}else{this.$6.add($0);}this.invokeChanged();},$4:function($p0){for(var $0=0;$0<this.$6.length;$0++){if(this.$6[$0]===$p0){return true;}}return false;},$5:false,$7:null,$8:null}
LxnBase.UI.Controls.ColumnFilters.NumberFilter=function(){this.$9=[];LxnBase.UI.Controls.ColumnFilters.NumberFilter.initializeBase(this);}
LxnBase.UI.Controls.ColumnFilters.NumberFilter.prototype={get_editor:function(){return this.$8;},get_checkItems:function(){return this.$9;},get_notItem:function(){return this.$A;},create:function(){return new LxnBase.UI.Controls.ColumnFilters.NumberFilter();},getFilterMenu:function(){var $0=Ext.id();var $1={checkchange:ss.Delegate.create(this,this.checkItemClicked)};this.$6();this.$A=new Ext.menu.CheckItem({text:LxnBase.BaseRes.propertyFilterCondition_Not,checked:this.get_not(),hideOnClick:false,listeners:{checkchange:ss.Delegate.create(this,function($p1_0,$p1_1){
this.set_not($p1_1);this.invokeChanged();})}});this.$9=[];this.$9.add(this.createCheckItem($0,1,$1));this.$9.add(this.createCheckItem($0,9,$1));this.$9.add(this.createCheckItem($0,6,$1));this.$9.add(this.createCheckItem($0,8,$1));this.$9.add(this.createCheckItem($0,7,$1));this.$9.add(this.createCheckItem($0,2,$1));var $2=[];$2.add(this.$A);$2.add(new Ext.menu.Separator());$2.addRange(this.$9);$2.add(new Ext.menu.Separator());$2.add(new LxnBase.UI.Controls.ColumnFilters.FilterMenuItem({editor:this.$8}));this.$7=new Ext.menu.Menu({cls:'filterMenu',items:$2});return this.$7;},$6:function(){this.$8=new Ext.form.NumberField({cls:'filterEditor',enableKeyEvents:true});this.$8.setValue(this.get_value());this.$8.on('keypress',ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=this.$8.getValue();var $1_1=$p1_1.getKey();if($1_1===Ext.EventObject.ENTER&&$1_0!==this.get_value()){this.set_value($1_0);this.$7.hide(true);this.invokeChanged();}else if($1_1===Ext.EventObject.ESC){this.$8.setValue(this.get_value());this.$7.hide(true);}}));this.$8.on('change',ss.Delegate.create(this,function(){
var $1_0=this.$8.getValue();if(this.get_value()!==$1_0){this.set_value($1_0);this.invokeChanged();}}));this.checkEditor();},$7:null,$8:null,$A:null}
LxnBase.UI.Controls.ColumnFilters.StringFilter=function(){this.$9=[];LxnBase.UI.Controls.ColumnFilters.StringFilter.initializeBase(this);}
LxnBase.UI.Controls.ColumnFilters.StringFilter.prototype={get_editor:function(){return this.$8;},get_checkItems:function(){return this.$9;},get_notItem:function(){return this.$A;},create:function(){return new LxnBase.UI.Controls.ColumnFilters.StringFilter();},getFilterMenu:function(){var $0=Ext.id();var $1={checkchange:ss.Delegate.create(this,this.checkItemClicked)};this.$6();this.$A=new Ext.menu.CheckItem({text:LxnBase.BaseRes.propertyFilterCondition_Not,checked:this.get_not(),hideOnClick:false,listeners:{checkchange:ss.Delegate.create(this,function($p1_0,$p1_1){
this.set_not($p1_1);this.invokeChanged();})}});this.$9=[];this.$9.add(this.createCheckItem($0,1,$1));var $2=this.createCheckItem($0,3,$1);$2.setChecked(true,true);this.set_operator(3);this.$9.add($2);this.$9.add(this.createCheckItem($0,5,$1));this.$9.add(this.createCheckItem($0,4,$1));this.$9.add(this.createCheckItem($0,2,$1));var $3=[];$3.add(this.$A);$3.add(new Ext.menu.Separator());$3.addRange(this.$9);$3.add(new Ext.menu.Separator());$3.add(new LxnBase.UI.Controls.ColumnFilters.FilterMenuItem({editor:this.$8}));this.$7=new Ext.menu.Menu({cls:'filterMenu',items:$3});return this.$7;},$6:function(){this.$8=new Ext.form.TextField({cls:'filterEditor',enableKeyEvents:true});this.$8.setValue(this.get_value());this.$8.on('keypress',ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=this.$8.getValue();var $1_1=$p1_1.getKey();if($1_1===Ext.EventObject.ENTER&&$1_0!==this.get_value()){this.set_value($1_0);this.$7.hide(true);this.invokeChanged();}else if($1_1===Ext.EventObject.ESC){this.$8.setValue(this.get_value());this.$7.hide(true);}}));this.$8.on('change',ss.Delegate.create(this,function(){
var $1_0=this.$8.getValue();if(this.get_value()!==$1_0){this.set_value($1_0);this.invokeChanged();}}));this.checkEditor();},$7:null,$8:null,$A:null}
Type.registerNamespace('LxnBase.UI.Controls');LxnBase.UI.Controls.ComboBox=function(config){LxnBase.UI.Controls.ComboBox.initializeBase(this,[config]);}
LxnBase.UI.Controls.ComboBox.$7_0=function($p0){if($p0!=null&&!(Type.canCast($p0,Array))){var $0=new Array(3);$0[LxnBase.Data.Reference.IdPos]=($p0).Id;$0[LxnBase.Data.Reference.NamePos]=($p0).Name;$0[LxnBase.Data.Reference.TypePos]=($p0).Type;return $0;}return $p0;}
LxnBase.UI.Controls.ComboBox.prototype={get_backgroundLoading:function(){return this.$7_2;},setValue:function(val){var $0=this.$7_1;if(ss.isNullOrUndefined(val)){LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'setValue',[val]);this.$7_1=null;this.lastQuery=null;if($0!==val){this.fireEvent('changeValue',this,val,$0);}return;}var $1;if(Type.canCast(val,Array)){$1=val;}else if(!ss.isNullOrUndefined((val).Id)&&!ss.isNullOrUndefined((val).Name)){$1=LxnBase.UI.Controls.ComboBox.$7_0(val);}else{LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'setValue',[val]);return;}LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'setValue',[$1[LxnBase.Data.Reference.NamePos]]);this.$7_1=$1;this.fireEvent('changeValue',this,this.$7_1,$0);},getValue:function(){var $0=this.getRawValue();if(($0==null||!$0)&&!ss.isUndefined(this.value)){this.setValue(null);}if(!ss.isNullOrUndefined(this.$7_1)){return this.$7_1;}return null;},getObjectInfo:function(){var $0=this.getValue();if($0==null){return null;}var $1=new LxnBase.Data.Reference();$1.Id=$0[LxnBase.Data.Reference.IdPos];$1.Name=$0[LxnBase.Data.Reference.NamePos];$1.Type=$0[LxnBase.Data.Reference.TypePos];return $1;},getSelectedId:function(){return (this.$7_1==null)?null:this.$7_1[LxnBase.Data.Reference.IdPos];},getTrigger:function(){if(!this.rendered){return null;}var $0=(this.getEl().parent()).select('.selector-trigger',true);if($0!=null){return $0.elements[0];}return null;},initComponent:function(){LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'initComponent');this.addEvents('changeValue');},onLoad:function(){if(this.$7_2){this.$7_2=false;var $0=this.store;if($0.getCount()===1){this.setValue($0.getAt(0).data);}else{var $1=this.lastSelectionText;(this.el.dom).value=$1||'';this.applyEmptyText();}}else{LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'onLoad');}},onSelect:function(record,index){if(this.fireEvent('beforeselect',this,record.data)){this.setValue(record.data);this.collapse();this.fireEvent('select',this,record.data);}},onKeyUp:function(e){if(e.getKey()===e.F2){return;}if(this.editable&&String.isNullOrEmpty(this.getRawValue())){this.setValue(null);}LxnBase.UI.Controls.ComboBox.callBaseMethod(this, 'onKeyUp',[e]);},beforeBlur:function(){var $0=this.getObjectInfo();var $1=this.getRawValue();if($0!=null&&$1===$0.Name){return;}var $2=this.findRecord(this.displayField,$1);if(ss.isNullOrUndefined($2)&&this.forceSelection){if(!String.isNullOrEmpty($1)&&$1!==this.emptyText&&$1!==this.lastQuery){this.$7_2=true;this.doQuery($1,true);}else{this.clearValue();}}else{if(!ss.isNullOrUndefined($2)){$1=$2.get(this.valueField||this.displayField);}this.setValue($1);}},$7_1:null,$7_2:false}
LxnBase.UI.Controls.DecimalField=function(config){LxnBase.UI.Controls.DecimalField.initializeBase(this,[config]);this.decimalSeparator=',';this.baseChars='0123456789.';if(!ss.isValue(this.decimalPrecision)||!this.decimalPrecision){this.decimalPrecision=2;}}
LxnBase.UI.Controls.DecimalField.prototype={setValue:function(v){if(ss.isNullOrUndefined(v)){v='';}else{v=(Type.getInstanceType(v)===Number)?v:Number.parse((v).replaceAll(this.decimalSeparator,'.'));var $0=Math.pow(10,this.decimalPrecision);v=(isNaN(v))?'':((Math.round(v*$0)/$0)).toFixed(this.decimalPrecision).replaceAll('.',this.decimalSeparator);}this.value=v;this.setRawValue(v);if(this.rendered){this.validate();}}}
LxnBase.UI.Controls.ObjectLink=function(){}
LxnBase.UI.Controls.ObjectLink.render=function(id,text,type){return "<a href='#' class='object-link' onclick='"+(LxnBase.UI.Controls.ObjectLink).get_fullName()+'.viewObject(event, '+JSON.stringify(type)+', '+JSON.stringify(id)+")'>"+text+'</a>';}
LxnBase.UI.Controls.ObjectLink.renderInfo=function(info){return (ss.isValue(info))?LxnBase.UI.Controls.ObjectLink.render(info.Id,info.Name,info.Type):'';}
LxnBase.UI.Controls.ObjectLink.renderInfos=function(infos){if(ss.isNullOrUndefined(infos)){return '';}var $0='';var $enum1=ss.IEnumerator.getEnumerator(infos);while($enum1.moveNext()){var $1=$enum1.current;$0+=LxnBase.UI.Controls.ObjectLink.renderInfo($1)+' ';}return $0;}
LxnBase.UI.Controls.ObjectLink.referencesRenderer=function(columnName){return function($p1_0,$p1_1,$p1_2,$p1_3,$p1_4,$p1_5){
return LxnBase.UI.Controls.ObjectLink.renderInfos(Type.safeCast($p1_2.get(columnName),Array));};}
LxnBase.UI.Controls.ObjectLink.renderArray=function(values){return LxnBase.UI.Controls.ObjectLink.render(values[LxnBase.Data.Reference.IdPos],values[LxnBase.Data.Reference.NamePos],values[LxnBase.Data.Reference.TypePos]);}
LxnBase.UI.Controls.ObjectLink.renderValue=function(value){var $0=Type.safeCast(value,Array);if($0!=null){return LxnBase.UI.Controls.ObjectLink.renderArray($0);}var $1=value;return LxnBase.UI.Controls.ObjectLink.renderInfo($1);}
LxnBase.UI.Controls.ObjectLink.viewObject=function(e,type,id){if(e.ctrlKey){e.cancelBubble=true;e.returnValue=false;}LxnBase.UI.FormsRegistry.viewObject(type,id,e.ctrlKey);}
LxnBase.UI.Controls.ObjectSelector=function(objectSelectorConfig){this.$B=objectSelectorConfig;this.$B.mode('remote');this.$0();}
LxnBase.UI.Controls.ObjectSelector.$4=function($p0,$p1){var $0=$p0.baseParams.query;if(!String.isNullOrEmpty($0)){return;}var $1=new LxnBase.Data.RangeResponse();$1.List=new Array(0);$1.TotalCount=0;var $2=$p0.proxy;$2.setResponse($1);}
LxnBase.UI.Controls.ObjectSelector.prototype={get_widget:function(){return this.$A;},get_config:function(){return this.$B;},get_text:function(){return this.$A.getRawValue();},getValue:function(){return this.$A.getValue();},getObjectInfo:function(){return this.$A.getObjectInfo();},getObjectId:function(){var $0=this.$A.getObjectInfo();return ($0!=null)?$0.Id:null;},getObjectName:function(){var $0=this.$A.getObjectInfo();return ($0!=null)?$0.Name:null;},setValue:function(value){this.$A.setValue(value);},focus:function(){this.$A.focus();},$0:function(){var $0=[];$0.add('Id');$0.add('Name');$0.add('Type');if(this.$B.get_valueProperties()!=null){var $enum1=ss.IEnumerator.getEnumerator(this.$B.get_valueProperties());while($enum1.moveNext()){var $5=$enum1.current;$0.add($5);}}if(this.$B.get_store()==null){var $6=this.$B.get_dataProxy()||LxnBase.Services.GenericService.suggestProxy(this.$B.get_clazz());var $7=this.$B.get_readerMetadata()||{id:0,root:'List',totalProperty:'TotalCount'};var $8=new Ext.data.Store(new Ext.data.StoreConfig().proxy($6).reader(new LxnBase.Data.RangeReader($7,$0)).toDictionary());$8.on('beforeload',LxnBase.UI.Controls.ObjectSelector.$4);$8.on('load',ss.Delegate.create(this,this.$5));this.$B.store($8);}var $1=[];$1.add('<tpl for=".">');$1.add('<div class="{[values.'+'Action'+' ? "x-combo-list-item combo-list-action" : values.'+'IsCaption'+' ? "x-combo-list-item combo-list-caption" : "x-combo-list-item"]}">{'+'Name'+'}</div>');$1.add('</tpl>');var $2=new Ext.XTemplate($1);this.$B.tpl($2);this.$B.triggerClass('selector-trigger');var $3=this.$B.toDictionary();var $4=$3['cls']||'';$3['cls']='selector '+$4;this.$A=new LxnBase.UI.Controls.ComboBox($3);if(this.$A.minListWidth<250){this.$A.minListWidth=250;}this.$A.on('beforeselect',ss.Delegate.create(this,this.$6));this.$A.on('render',ss.Delegate.create(this,this.$2));this.$A.on('keydown',ss.Delegate.create(this,this.$8));this.$A.on('beforequery',ss.Delegate.create(this,this.$3));this.$A.on('changeValue',ss.Delegate.create(this,this.$7));},$1:function(){if(!this.$B.get_allowEdit()){return;}var $0=this.$A.wrap;this.$C=$0.createChild({tag:'div',cls:'selectorEdit'});this.$C.on('click',ss.Delegate.create(this,this.$9));if(this.$A.value==null){this.$C.addClass('selectorEditDisabled');}},updateTriggerStatus:function(){var $0=this.$A.getTrigger();if($0==null){return;}var $1=false;if(String.isNullOrEmpty(this.$A.value)){var $2=this.$B.getActions(this.$A.store,null,null);if($2==null||!$2.length){$1=true;}}if($1){$0.hide();var $3=$("<div class='tigger-disabled'></div>");$3.insertBefore($($0.dom));}else{$('.tigger-disabled',$($0.dom.parentNode)).remove();$0.show();}},$2:function(){this.$1();this.updateTriggerStatus();},$3:function($p0){var $0=$p0.query;var $1=this.$B.getActions(this.$A.store,null,$0);if(String.isNullOrEmpty($0)&&($1==null||!$1.length)){$p0.cancel=true;this.$A.collapse();}},$5:function($p0,$p1,$p2){if(this.$A.get_backgroundLoading()){return;}var $0=this.$B.getActions($p0,$p1,$p0.baseParams.query);if($0.length>0){for(var $1=0;$1<$0.length;$1++){var $2=$0[$1];var $3={};$3['Name']=$2.getText();$3['Id']=$3['Name'];$3['Action']=$2;var $4=new Ext.data.Record();$4.data=$3;$p0.insert($p1.length+$1,[$4]);}}if($p1==null||!$p1.length||String.isNullOrEmpty(this.$A.getRawValue())){var $5={};$5['Name']=LxnBase.BaseRes.noData_Text;$5['Id']=-1;$5['IsCaption']=true;var $6=new Ext.data.Record();$6.data=$5;$p0.insert(0,[$6]);}},$6:function($p0,$p1,$p2){var $0=$p1;if($0['IsCaption']){$p0.collapse();return false;}var $1=$0['Action'];if(ss.isNullOrUndefined($1)){return true;}$p0.collapse();$1.execute(this,this.get_text());return false;},$7:function($p0,$p1,$p2){if(!this.$A.rendered){return;}this.updateTriggerStatus();if(this.$B.get_allowEdit()){if(!this.$B.get_allowCreate()&&($p1==null||!$p1)){this.$C.addClass('selectorEditDisabled');}else{this.$C.removeClass('selectorEditDisabled');}}},$8:function($p0,$p1){if(this.$B.get_allowEdit()&&$p1.keyCode===Ext.EventObject.F2&&!$p1.shiftKey&&!$p1.ctrlKey&&!$p1.altKey){$p1.stopEvent();this.$9();}},$9:function(){var $0=this.getValue();if($0==null&&!this.$B.get_allowCreate()){return;}var $1=($0==null)?null:$0[LxnBase.Data.Reference.IdPos];var $2=(($0==null||$0[LxnBase.Data.Reference.TypePos]==null)?this.$B.get_clazz():$0[LxnBase.Data.Reference.TypePos]);LxnBase.UI.FormsRegistry.editObject($2,$1,null,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;var $1_1=new LxnBase.Data.Reference();$1_1.Id=$1_0.Item.Id;$1_1.Name=$1_0.Item.__reference;$1_1.Type=$1_0.Item.__class;this.setValue($1_1);window.setTimeout(ss.Delegate.create(this,this.focus),0);}),ss.Delegate.create(this,function(){
this.focus();}));},$A:null,$B:null,$C:null}
LxnBase.UI.Controls.ObjectSelectorConfig=function(){LxnBase.UI.Controls.ObjectSelectorConfig.initializeBase(this);this.minChars(0);this.typeAhead(false);this.forceSelection(true);this.resizable(true);this.enableKeyEvents(true);this.queryDelay(50);this.selectOnFocus(true);this.valueField('Id');this.displayField('Name');}
LxnBase.UI.Controls.ObjectSelectorConfig.prototype={get_clazz:function(){return this.$8_0;},get_valueField:function(){return this.o['valueField'];},get_displayField:function(){return this.o['displayField'];},get_valueProperties:function(){return this.$8_1;},getActions:function(store,records,query){var $0=[];if(this.$8_3!=null){var $1=this.$8_3(store,records,query);if($1!=null&&$1.length>0){$0.addRange($1);}}if(this.$8_2!=null&&this.$8_2.length>0){$0.addRange(this.$8_2);}return $0;},get_dataProxy:function(){return this.$8_6;},get_readerMetadata:function(){return this.$8_7;},get_allowCreate:function(){return this.$8_5;},get_allowEdit:function(){return this.$8_4;},get_store:function(){return this.o['store'];},setClass:function(clazz){this.$8_0=clazz;return this;},valueProperties:function(valueProperties){this.$8_1=valueProperties;return this;},customActions:function(customActions){this.$8_2=customActions;return this;},customActionsDelegate:function(getCustomActions){this.$8_3=getCustomActions;return this;},setValue:function(val){if(!ss.isNullOrUndefined(val)){this.value([val.Id,val.Name]);}return this;},setDataProxy:function(proxy){this.$8_6=proxy;return this;},setReaderMetadata:function(readerMetadata){this.$8_7=readerMetadata;return this;},allowCreate:function(allowCreate){this.$8_5=allowCreate;return this;},allowEdit:function(allowEdit){this.$8_4=allowEdit;return this;},$8_0:null,$8_1:null,$8_2:null,$8_3:null,$8_4:false,$8_5:false,$8_6:null,$8_7:null}
LxnBase.EnumUtility.registerClass('LxnBase.EnumUtility');LxnBase.MessageRegister.registerClass('LxnBase.MessageRegister');LxnBase.MessageRegisterEventArgs.registerClass('LxnBase.MessageRegisterEventArgs',ss.EventArgs);LxnBase.NumberUtility.registerClass('LxnBase.NumberUtility');LxnBase.StringUtility.registerClass('LxnBase.StringUtility');LxnBase.Log.registerClass('LxnBase.Log');LxnBase.Data.RangeRequest.registerClass('LxnBase.Data.RangeRequest');LxnBase.Data.Reference.registerClass('LxnBase.Data.Reference');LxnBase.Data.DeleteOperationResponse.registerClass('LxnBase.Data.DeleteOperationResponse');LxnBase.Data.DocumentExportArgs.registerClass('LxnBase.Data.DocumentExportArgs');LxnBase.Data.ItemResponse.registerClass('LxnBase.Data.ItemResponse');LxnBase.Data.OperationPermissions.registerClass('LxnBase.Data.OperationPermissions');LxnBase.Data.OperationStatus.registerClass('LxnBase.Data.OperationStatus');LxnBase.Data.PropertyFilter.registerClass('LxnBase.Data.PropertyFilter');LxnBase.Data.PropertyFilterCondition.registerClass('LxnBase.Data.PropertyFilterCondition');LxnBase.Data.RangeResponse.registerClass('LxnBase.Data.RangeResponse');LxnBase.Data.ConfigManager.registerClass('LxnBase.Data.ConfigManager');LxnBase.Data.ObjectPropertyNames.registerClass('LxnBase.Data.ObjectPropertyNames');LxnBase.Services.ColumnConfig.registerClass('LxnBase.Services.ColumnConfig');LxnBase.Services.ClassColumnConfig.registerClass('LxnBase.Services.ClassColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Services.ClassDefinition.registerClass('LxnBase.Services.ClassDefinition');LxnBase.Services.CustomTypeColumnConfig.registerClass('LxnBase.Services.CustomTypeColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Services.DateTimeColumnConfig.registerClass('LxnBase.Services.DateTimeColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Services.GenericService.registerClass('LxnBase.Services.GenericService');LxnBase.Services.ItemConfig.registerClass('LxnBase.Services.ItemConfig');LxnBase.Services.ListColumnConfig.registerClass('LxnBase.Services.ListColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Services.ListConfig.registerClass('LxnBase.Services.ListConfig');LxnBase.Services.NumberColumnConfig.registerClass('LxnBase.Services.NumberColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Services.TextColumnConfig.registerClass('LxnBase.Services.TextColumnConfig',LxnBase.Services.ColumnConfig);LxnBase.Knockout.DateBindingHandler.registerClass('LxnBase.Knockout.DateBindingHandler',Object);LxnBase.Knockout.EmailBindingHandler.registerClass('LxnBase.Knockout.EmailBindingHandler',Object);LxnBase.Knockout.FixedBindingHandler.registerClass('LxnBase.Knockout.FixedBindingHandler',Object);LxnBase.Knockout.LinkBindingHandler.registerClass('LxnBase.Knockout.LinkBindingHandler',Object);LxnBase.Knockout.ResBindingHandler.registerClass('LxnBase.Knockout.ResBindingHandler',Object);LxnBase.Knockout.StringTemplate.registerClass('LxnBase.Knockout.StringTemplate');LxnBase.Knockout.ViewBindingHandler.registerClass('LxnBase.Knockout.ViewBindingHandler',Object);LxnBase.Net.WebServiceError.registerClass('LxnBase.Net.WebServiceError');LxnBase.Net.WebServiceFailureArgs.registerClass('LxnBase.Net.WebServiceFailureArgs');LxnBase.Net.WebService.registerClass('LxnBase.Net.WebService');LxnBase.UI.ActionFactory.registerClass('LxnBase.UI.ActionFactory');LxnBase.UI.BaseEditForm.registerClass('LxnBase.UI.BaseEditForm',null,LxnBase.UI.IKeyHandler);LxnBase.UI.BaseClassEditForm.registerClass('LxnBase.UI.BaseClassEditForm',LxnBase.UI.BaseEditForm);LxnBase.UI.Tab.registerClass('LxnBase.UI.Tab',Ext.Panel,LxnBase.UI.IKeyHandler);LxnBase.UI.BaseClassViewForm.registerClass('LxnBase.UI.BaseClassViewForm',LxnBase.UI.Tab);LxnBase.UI.EditFormArgs.registerClass('LxnBase.UI.EditFormArgs');LxnBase.UI.EventsManager.registerClass('LxnBase.UI.EventsManager');LxnBase.UI.FieldActionManager.registerClass('LxnBase.UI.FieldActionManager');LxnBase.UI.FieldActions.registerClass('LxnBase.UI.FieldActions');LxnBase.UI.FieldNavigationManager.registerClass('LxnBase.UI.FieldNavigationManager');LxnBase.UI.Form.registerClass('LxnBase.UI.Form',Ext.form.FormPanel);LxnBase.UI.FormsRegistry.registerClass('LxnBase.UI.FormsRegistry');LxnBase.UI.ViewAction.registerClass('LxnBase.UI.ViewAction');LxnBase.UI.Infos.registerClass('LxnBase.UI.Infos');LxnBase.UI.KeyEventHandler.registerClass('LxnBase.UI.KeyEventHandler');LxnBase.UI.ListArgs.registerClass('LxnBase.UI.ListArgs');LxnBase.UI.LxnMenu.registerClass('LxnBase.UI.LxnMenu',Ext.menu.Menu);LxnBase.UI.MessageBoxWrap.registerClass('LxnBase.UI.MessageBoxWrap');LxnBase.UI.Messages.registerClass('LxnBase.UI.Messages');LxnBase.UI.PropertyFilterExtention.registerClass('LxnBase.UI.PropertyFilterExtention');LxnBase.UI.ReplaceForm.registerClass('LxnBase.UI.ReplaceForm',LxnBase.UI.BaseEditForm);LxnBase.UI.SelectArgs.registerClass('LxnBase.UI.SelectArgs');LxnBase.UI.Tabs.registerClass('LxnBase.UI.Tabs');LxnBase.UI.AutoControls.AutoGrid.registerClass('LxnBase.UI.AutoControls.AutoGrid',Ext.grid.EditorGridPanel);LxnBase.UI.AutoControls.AutoGridArgs.registerClass('LxnBase.UI.AutoControls.AutoGridArgs');LxnBase.UI.AutoControls.AutoGridView.registerClass('LxnBase.UI.AutoControls.AutoGridView',Ext.grid.GridView);LxnBase.UI.AutoControls.ControlFactory.registerClass('LxnBase.UI.AutoControls.ControlFactory');LxnBase.UI.AutoControls.GridFilterConfig.registerClass('LxnBase.UI.AutoControls.GridFilterConfig');LxnBase.UI.AutoControls.GridFilterPlugin.registerClass('LxnBase.UI.AutoControls.GridFilterPlugin');LxnBase.UI.AutoControls.RecordMeta.registerClass('LxnBase.UI.AutoControls.RecordMeta',ss.Record);LxnBase.UI.AutoControls.ReportLoader.registerClass('LxnBase.UI.AutoControls.ReportLoader');LxnBase.UI.AutoForms.AutoEditForm.registerClass('LxnBase.UI.AutoForms.AutoEditForm',LxnBase.UI.BaseClassEditForm);LxnBase.UI.AutoForms.AutoFormCallbacks.registerClass('LxnBase.UI.AutoForms.AutoFormCallbacks');LxnBase.UI.AutoForms.AutoListTab.registerClass('LxnBase.UI.AutoForms.AutoListTab',LxnBase.UI.Tab);LxnBase.UI.AutoForms.AutoSelectForm.registerClass('LxnBase.UI.AutoForms.AutoSelectForm',null,LxnBase.UI.IKeyHandler);LxnBase.UI.AutoForms.AutoViewForm.registerClass('LxnBase.UI.AutoForms.AutoViewForm',LxnBase.UI.BaseClassViewForm);LxnBase.UI.Controls.ColumnFilters.BaseFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.BaseFilter');LxnBase.UI.Controls.ColumnFilters.BooleanFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.BooleanFilter',LxnBase.UI.Controls.ColumnFilters.BaseFilter);LxnBase.UI.Controls.ColumnFilters.DateFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.DateFilter',LxnBase.UI.Controls.ColumnFilters.BaseFilter);LxnBase.UI.Controls.ColumnFilters.EditorFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.EditorFilter',LxnBase.UI.Controls.ColumnFilters.BaseFilter);LxnBase.UI.Controls.ColumnFilters.ListFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.ListFilter',LxnBase.UI.Controls.ColumnFilters.BaseFilter);LxnBase.UI.Controls.ColumnFilters.NumberFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.NumberFilter',LxnBase.UI.Controls.ColumnFilters.EditorFilter);LxnBase.UI.Controls.ColumnFilters.StringFilter.registerClass('LxnBase.UI.Controls.ColumnFilters.StringFilter',LxnBase.UI.Controls.ColumnFilters.EditorFilter);LxnBase.UI.Controls.ComboBox.registerClass('LxnBase.UI.Controls.ComboBox',Ext.form.ComboBox);LxnBase.UI.Controls.DecimalField.registerClass('LxnBase.UI.Controls.DecimalField',Ext.form.NumberField);LxnBase.UI.Controls.ObjectLink.registerClass('LxnBase.UI.Controls.ObjectLink');LxnBase.UI.Controls.ObjectSelector.registerClass('LxnBase.UI.Controls.ObjectSelector');LxnBase.UI.Controls.ObjectSelectorConfig.registerClass('LxnBase.UI.Controls.ObjectSelectorConfig',Ext.form.ComboBoxConfig);LxnBase.MessageRegister.$0=null;LxnBase.Data.Reference.IdPos=0;LxnBase.Data.Reference.NamePos=1;LxnBase.Data.Reference.TypePos=2;LxnBase.Data.ConfigManager.$0={};LxnBase.Data.ConfigManager.$1={};LxnBase.Data.ConfigManager.$2={};LxnBase.Data.ObjectPropertyNames.id='Id';LxnBase.Data.ObjectPropertyNames.version='Version';LxnBase.Data.ObjectPropertyNames.name='Name';LxnBase.Data.ObjectPropertyNames.type='Type';LxnBase.Data.ObjectPropertyNames.reference='__reference';LxnBase.Data.ObjectPropertyNames.objectClass='__class';LxnBase.Services.GenericService.service=null;(function(){LxnBase.Services.GenericService.service=new LxnBase.Net.WebService('GenericService.asmx');})();
(function(){ko.bindingHandlers['date']=new LxnBase.Knockout.DateBindingHandler();})();
LxnBase.Knockout.EmailBindingHandler.$1_0=new RegExp('^.+:');(function(){ko.bindingHandlers['email']=new LxnBase.Knockout.EmailBindingHandler();})();
(function(){ko.bindingHandlers['fixed']=new LxnBase.Knockout.FixedBindingHandler();})();
LxnBase.Knockout.LinkBindingHandler.$1_0=new RegExp('^.+://');(function(){ko.bindingHandlers['link']=new LxnBase.Knockout.LinkBindingHandler();})();
LxnBase.Knockout.ResBindingHandler.$1_0=[];(function(){ko.bindingHandlers['res']=new LxnBase.Knockout.ResBindingHandler();})();
LxnBase.Knockout.StringTemplate.$0={};(function(){var $0=new ko.nativeTemplateEngine();$0.makeTemplateSource=LxnBase.Knockout.StringTemplate.get;ko.setTemplateEngine($0);})();
(function(){ko.bindingHandlers['view']=new LxnBase.Knockout.ViewBindingHandler();})();
LxnBase.Net.WebService.root=null;LxnBase.Net.WebService.$0=null;LxnBase.UI.EventsManager.$1=null;(function(){LxnBase.UI.EventsManager.$1=[];$(document).keydown(LxnBase.UI.EventsManager.$0);})();
LxnBase.UI.FormsRegistry.$2={};LxnBase.UI.FormsRegistry.$3=null;LxnBase.UI.FormsRegistry.$4={};LxnBase.UI.FormsRegistry.$5=null;LxnBase.UI.FormsRegistry.$6={};LxnBase.UI.FormsRegistry.$7=null;LxnBase.UI.FormsRegistry.$8={};LxnBase.UI.FormsRegistry.$9=null;LxnBase.UI.Infos.$1=null;LxnBase.UI.Tabs.$0=null;LxnBase.UI.AutoControls.ControlFactory.minWidth=70;LxnBase.UI.AutoControls.ControlFactory.maxWidth=230;LxnBase.UI.AutoControls.ControlFactory.defaultTextFieldWidth=180;LxnBase.UI.AutoControls.ControlFactory.defaultNumberFieldWidth=87;LxnBase.UI.AutoControls.ControlFactory.$4={};LxnBase.UI.AutoControls.ControlFactory.$5={};LxnBase.UI.AutoControls.GridFilterPlugin.$10={};LxnBase.UI.AutoControls.ReportLoader.$0=null;LxnBase.UI.Controls.ColumnFilters.BaseFilter._filterMenuClass='filterMenu';LxnBase.UI.Controls.ColumnFilters.EditorFilter._editorClassName='filterEditor';LxnBase.UI.Controls.ColumnFilters.EditorFilter._defaultOperator=1;})(jQuery);LxnBase.ObjectUtility={merge:function(target,obj){for(var key in obj){if(obj.hasOwnProperty(key)){var copy=obj[key];if(target.hasOwnProperty(key)){var src=target[key];if(typeof(src)==='object'&&typeof(copy)==='object'){LxnBase.ObjectUtility.merge(src,copy);continue;}} target[key]=copy;}} return target;}};// This script was generated using Script# v0.7.4.0
